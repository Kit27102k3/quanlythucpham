"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _mongoose = _interopRequireDefault(require("mongoose"));

// Xóa hoàn toàn model SavedVoucher nếu đã tồn tại
_mongoose.default.models = {};
_mongoose.default.modelSchemas = {};

const savedVoucherSchema = new _mongoose.default.Schema({
  userId: {
    type: _mongoose.default.Schema.Types.ObjectId,
    ref: "User",
    required: true
  },
  couponId: {
    type: _mongoose.default.Schema.Types.ObjectId,
    ref: "Coupon",
    required: true
  },
  savedAt: {
    type: Date,
    default: Date.now
  },
  isPaid: {
    type: Boolean,
    default: false
  }
});

// Tạo index mới cho cặp userId và couponId
savedVoucherSchema.index({ userId: 1, couponId: 1 }, { unique: true });

// Tạo model sau khi đã xóa model cũ
const SavedVoucher = _mongoose.default.model("SavedVoucher", savedVoucherSchema);var _default = exports.default =

SavedVoucher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm1vbmdvb3NlIiwibW9kZWxzIiwibW9kZWxTY2hlbWFzIiwic2F2ZWRWb3VjaGVyU2NoZW1hIiwiU2NoZW1hIiwidXNlcklkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsImNvdXBvbklkIiwic2F2ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwiaXNQYWlkIiwiQm9vbGVhbiIsImluZGV4IiwidW5pcXVlIiwiU2F2ZWRWb3VjaGVyIiwibW9kZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvTW9kZWwvU2F2ZWRWb3VjaGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbi8vIFjDs2EgaG/DoG4gdG/DoG4gbW9kZWwgU2F2ZWRWb3VjaGVyIG7hur91IMSRw6MgdOG7k24gdOG6oWlcclxubW9uZ29vc2UubW9kZWxzID0ge307XHJcbm1vbmdvb3NlLm1vZGVsU2NoZW1hcyA9IHt9O1xyXG5cclxuY29uc3Qgc2F2ZWRWb3VjaGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgdXNlcklkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6IFwiVXNlclwiLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIGNvdXBvbklkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6IFwiQ291cG9uXCIsXHJcbiAgICByZXF1aXJlZDogdHJ1ZVxyXG4gIH0sXHJcbiAgc2F2ZWRBdDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93XHJcbiAgfSxcclxuICBpc1BhaWQ6IHtcclxuICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICBkZWZhdWx0OiBmYWxzZVxyXG4gIH1cclxufSk7XHJcblxyXG4vLyBU4bqhbyBpbmRleCBt4bubaSBjaG8gY+G6t3AgdXNlcklkIHbDoCBjb3Vwb25JZFxyXG5zYXZlZFZvdWNoZXJTY2hlbWEuaW5kZXgoeyB1c2VySWQ6IDEsIGNvdXBvbklkOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG5cclxuLy8gVOG6oW8gbW9kZWwgc2F1IGtoaSDEkcOjIHjDs2EgbW9kZWwgY8WpXHJcbmNvbnN0IFNhdmVkVm91Y2hlciA9IG1vbmdvb3NlLm1vZGVsKFwiU2F2ZWRWb3VjaGVyXCIsIHNhdmVkVm91Y2hlclNjaGVtYSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTYXZlZFZvdWNoZXI7ICJdLCJtYXBwaW5ncyI6InlMQUFBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTs7QUFFQTtBQUNBQyxpQkFBUSxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ3BCRCxpQkFBUSxDQUFDRSxZQUFZLEdBQUcsQ0FBQyxDQUFDOztBQUUxQixNQUFNQyxrQkFBa0IsR0FBRyxJQUFJSCxpQkFBUSxDQUFDSSxNQUFNLENBQUM7RUFDN0NDLE1BQU0sRUFBRTtJQUNOQyxJQUFJLEVBQUVOLGlCQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsTUFBTTtJQUNYQyxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNSTCxJQUFJLEVBQUVOLGlCQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsUUFBUTtJQUNiQyxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RFLE9BQU8sRUFBRTtJQUNQTixJQUFJLEVBQUVPLElBQUk7SUFDVkMsT0FBTyxFQUFFRCxJQUFJLENBQUNFO0VBQ2hCLENBQUM7RUFDREMsTUFBTSxFQUFFO0lBQ05WLElBQUksRUFBRVcsT0FBTztJQUNiSCxPQUFPLEVBQUU7RUFDWDtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBWCxrQkFBa0IsQ0FBQ2UsS0FBSyxDQUFDLEVBQUViLE1BQU0sRUFBRSxDQUFDLEVBQUVNLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUVRLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDOztBQUV0RTtBQUNBLE1BQU1DLFlBQVksR0FBR3BCLGlCQUFRLENBQUNxQixLQUFLLENBQUMsY0FBYyxFQUFFbEIsa0JBQWtCLENBQUMsQ0FBQyxJQUFBbUIsUUFBQSxHQUFBQyxPQUFBLENBQUFULE9BQUE7O0FBRXpETSxZQUFZIiwiaWdub3JlTGlzdCI6W119