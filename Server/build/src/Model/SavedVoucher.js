"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _mongoose = _interopRequireDefault(require("mongoose"));function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

// Xóa hoàn toàn model SavedVoucher nếu đã tồn tại
_mongoose.default.models = {};
_mongoose.default.modelSchemas = {};

const savedVoucherSchema = new _mongoose.default.Schema({
  userId: {
    type: _mongoose.default.Schema.Types.ObjectId,
    ref: "User",
    required: true
  },
  couponId: {
    type: _mongoose.default.Schema.Types.ObjectId,
    ref: "Coupon",
    required: true
  },
  savedAt: {
    type: Date,
    default: Date.now
  },
  isPaid: {
    type: Boolean,
    default: false
  }
});

// Tạo index mới cho cặp userId và couponId
savedVoucherSchema.index({ userId: 1, couponId: 1 }, { unique: true });

// Tạo model sau khi đã xóa model cũ
const SavedVoucher = _mongoose.default.model("SavedVoucher", savedVoucherSchema);var _default = exports.default =

SavedVoucher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29vc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm1vbmdvb3NlIiwibW9kZWxzIiwibW9kZWxTY2hlbWFzIiwic2F2ZWRWb3VjaGVyU2NoZW1hIiwiU2NoZW1hIiwidXNlcklkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsImNvdXBvbklkIiwic2F2ZWRBdCIsIkRhdGUiLCJub3ciLCJpc1BhaWQiLCJCb29sZWFuIiwiaW5kZXgiLCJ1bmlxdWUiLCJTYXZlZFZvdWNoZXIiLCJtb2RlbCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9Nb2RlbC9TYXZlZFZvdWNoZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuLy8gWMOzYSBob8OgbiB0b8OgbiBtb2RlbCBTYXZlZFZvdWNoZXIgbuG6v3UgxJHDoyB04buTbiB04bqhaVxyXG5tb25nb29zZS5tb2RlbHMgPSB7fTtcclxubW9uZ29vc2UubW9kZWxTY2hlbWFzID0ge307XHJcblxyXG5jb25zdCBzYXZlZFZvdWNoZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICB1c2VySWQ6IHtcclxuICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgIHJlZjogXCJVc2VyXCIsXHJcbiAgICByZXF1aXJlZDogdHJ1ZVxyXG4gIH0sXHJcbiAgY291cG9uSWQ6IHtcclxuICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgIHJlZjogXCJDb3Vwb25cIixcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICBzYXZlZEF0OiB7XHJcbiAgICB0eXBlOiBEYXRlLFxyXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcclxuICB9LFxyXG4gIGlzUGFpZDoge1xyXG4gICAgdHlwZTogQm9vbGVhbixcclxuICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIFThuqFvIGluZGV4IG3hu5tpIGNobyBj4bq3cCB1c2VySWQgdsOgIGNvdXBvbklkXHJcbnNhdmVkVm91Y2hlclNjaGVtYS5pbmRleCh7IHVzZXJJZDogMSwgY291cG9uSWQ6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XHJcblxyXG4vLyBU4bqhbyBtb2RlbCBzYXUga2hpIMSRw6MgeMOzYSBtb2RlbCBjxalcclxuY29uc3QgU2F2ZWRWb3VjaGVyID0gbW9uZ29vc2UubW9kZWwoXCJTYXZlZFZvdWNoZXJcIiwgc2F2ZWRWb3VjaGVyU2NoZW1hKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNhdmVkVm91Y2hlcjsgIl0sIm1hcHBpbmdzIjoib0dBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBLGNBQWdDLFNBQUFELHVCQUFBRSxDQUFBLFVBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBOztBQUVoQztBQUNBRyxpQkFBUSxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ3BCRCxpQkFBUSxDQUFDRSxZQUFZLEdBQUcsQ0FBQyxDQUFDOztBQUUxQixNQUFNQyxrQkFBa0IsR0FBRyxJQUFJSCxpQkFBUSxDQUFDSSxNQUFNLENBQUM7RUFDN0NDLE1BQU0sRUFBRTtJQUNOQyxJQUFJLEVBQUVOLGlCQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsTUFBTTtJQUNYQyxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNSTCxJQUFJLEVBQUVOLGlCQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsUUFBUTtJQUNiQyxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RFLE9BQU8sRUFBRTtJQUNQTixJQUFJLEVBQUVPLElBQUk7SUFDVmQsT0FBTyxFQUFFYyxJQUFJLENBQUNDO0VBQ2hCLENBQUM7RUFDREMsTUFBTSxFQUFFO0lBQ05ULElBQUksRUFBRVUsT0FBTztJQUNiakIsT0FBTyxFQUFFO0VBQ1g7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQUksa0JBQWtCLENBQUNjLEtBQUssQ0FBQyxFQUFFWixNQUFNLEVBQUUsQ0FBQyxFQUFFTSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFTyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQzs7QUFFdEU7QUFDQSxNQUFNQyxZQUFZLEdBQUduQixpQkFBUSxDQUFDb0IsS0FBSyxDQUFDLGNBQWMsRUFBRWpCLGtCQUFrQixDQUFDLENBQUMsSUFBQWtCLFFBQUEsR0FBQUMsT0FBQSxDQUFBdkIsT0FBQTs7QUFFekRvQixZQUFZIiwiaWdub3JlTGlzdCI6W119