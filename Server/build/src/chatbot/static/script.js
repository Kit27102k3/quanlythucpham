"use strict";$(document).ready(function () {
  const chatMessages = $('#chatMessages');
  const userQuestion = $('#userQuestion');
  const chatForm = $('#chatForm');
  const typingIndicator = $('#typingIndicator');

  // Function to add a message to the chat
  function addMessage(message, isUser = false) {
    const messageDiv = $('<div>').addClass(`message ${isUser ? 'user' : 'bot'}`);
    const messageContent = $('<div>').addClass('message-content').html(message);
    messageDiv.append(messageContent);
    chatMessages.append(messageDiv);
    chatMessages.scrollTop(chatMessages[0].scrollHeight);
  }

  // Handle form submission
  chatForm.on('submit', function (e) {
    e.preventDefault();

    const question = userQuestion.val().trim();
    if (!question) return;

    // Add user message
    addMessage(question, true);

    // Clear input
    userQuestion.val('');

    // Show typing indicator
    typingIndicator.show();

    // Send request to server
    $.ajax({
      url: '/ask',
      type: 'POST',
      data: { question: question },
      success: function (data) {
        // Hide typing indicator
        typingIndicator.hide();

        // Format the answer with line breaks
        const formattedAnswer = data.answer.replace(/\n/g, '<br>');

        // Add bot response
        addMessage(formattedAnswer);
      },
      error: function () {
        // Hide typing indicator
        typingIndicator.hide();

        // Add error message
        addMessage('Xin lỗi, đã có lỗi xảy ra. Vui lòng thử lại sau.');
      }
    });
  });

  // Function to suggest common questions
  function addSuggestedQuestions() {
    const suggestedQuestions = [
    'Thực phẩm sạch là gì?',
    'Làm thế nào để đặt hàng trên website?',
    'Các phương thức thanh toán nào được chấp nhận?',
    'Thời gian giao hàng là bao lâu?',
    'Chính sách đổi trả hàng như thế nào?'];


    const suggestionsDiv = $('<div>').addClass('suggested-questions');
    const suggestionsTitle = $('<p>').text('Các câu hỏi phổ biến:');
    suggestionsDiv.append(suggestionsTitle);

    const suggestionsList = $('<div>').addClass('suggestions-list');
    suggestedQuestions.forEach((question) => {
      const questionBtn = $('<button>').
      addClass('suggestion-btn').
      text(question).
      on('click', function () {
        userQuestion.val(question);
        chatForm.submit();
      });
      suggestionsList.append(questionBtn);
    });

    suggestionsDiv.append(suggestionsList);
    chatMessages.append(suggestionsDiv);
  }

  // Add suggested questions after initial greeting
  addSuggestedQuestions();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImNoYXRNZXNzYWdlcyIsInVzZXJRdWVzdGlvbiIsImNoYXRGb3JtIiwidHlwaW5nSW5kaWNhdG9yIiwiYWRkTWVzc2FnZSIsIm1lc3NhZ2UiLCJpc1VzZXIiLCJtZXNzYWdlRGl2IiwiYWRkQ2xhc3MiLCJtZXNzYWdlQ29udGVudCIsImh0bWwiLCJhcHBlbmQiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInF1ZXN0aW9uIiwidmFsIiwidHJpbSIsInNob3ciLCJhamF4IiwidXJsIiwidHlwZSIsImRhdGEiLCJzdWNjZXNzIiwiaGlkZSIsImZvcm1hdHRlZEFuc3dlciIsImFuc3dlciIsInJlcGxhY2UiLCJlcnJvciIsImFkZFN1Z2dlc3RlZFF1ZXN0aW9ucyIsInN1Z2dlc3RlZFF1ZXN0aW9ucyIsInN1Z2dlc3Rpb25zRGl2Iiwic3VnZ2VzdGlvbnNUaXRsZSIsInRleHQiLCJzdWdnZXN0aW9uc0xpc3QiLCJmb3JFYWNoIiwicXVlc3Rpb25CdG4iLCJzdWJtaXQiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY2hhdGJvdC9zdGF0aWMvc2NyaXB0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgY2hhdE1lc3NhZ2VzID0gJCgnI2NoYXRNZXNzYWdlcycpO1xyXG4gICAgY29uc3QgdXNlclF1ZXN0aW9uID0gJCgnI3VzZXJRdWVzdGlvbicpO1xyXG4gICAgY29uc3QgY2hhdEZvcm0gPSAkKCcjY2hhdEZvcm0nKTtcclxuICAgIGNvbnN0IHR5cGluZ0luZGljYXRvciA9ICQoJyN0eXBpbmdJbmRpY2F0b3InKTtcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdG8gYWRkIGEgbWVzc2FnZSB0byB0aGUgY2hhdFxyXG4gICAgZnVuY3Rpb24gYWRkTWVzc2FnZShtZXNzYWdlLCBpc1VzZXIgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEaXYgPSAkKCc8ZGl2PicpLmFkZENsYXNzKGBtZXNzYWdlICR7aXNVc2VyID8gJ3VzZXInIDogJ2JvdCd9YCk7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdtZXNzYWdlLWNvbnRlbnQnKS5odG1sKG1lc3NhZ2UpO1xyXG4gICAgICAgIG1lc3NhZ2VEaXYuYXBwZW5kKG1lc3NhZ2VDb250ZW50KTtcclxuICAgICAgICBjaGF0TWVzc2FnZXMuYXBwZW5kKG1lc3NhZ2VEaXYpO1xyXG4gICAgICAgIGNoYXRNZXNzYWdlcy5zY3JvbGxUb3AoY2hhdE1lc3NhZ2VzWzBdLnNjcm9sbEhlaWdodCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb25cclxuICAgIGNoYXRGb3JtLm9uKCdzdWJtaXQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHF1ZXN0aW9uID0gdXNlclF1ZXN0aW9uLnZhbCgpLnRyaW0oKTtcclxuICAgICAgICBpZiAoIXF1ZXN0aW9uKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQWRkIHVzZXIgbWVzc2FnZVxyXG4gICAgICAgIGFkZE1lc3NhZ2UocXVlc3Rpb24sIHRydWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENsZWFyIGlucHV0XHJcbiAgICAgICAgdXNlclF1ZXN0aW9uLnZhbCgnJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2hvdyB0eXBpbmcgaW5kaWNhdG9yXHJcbiAgICAgICAgdHlwaW5nSW5kaWNhdG9yLnNob3coKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZW5kIHJlcXVlc3QgdG8gc2VydmVyXHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FzaycsXHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YTogeyBxdWVzdGlvbjogcXVlc3Rpb24gfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0eXBpbmcgaW5kaWNhdG9yXHJcbiAgICAgICAgICAgICAgICB0eXBpbmdJbmRpY2F0b3IuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBGb3JtYXQgdGhlIGFuc3dlciB3aXRoIGxpbmUgYnJlYWtzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRBbnN3ZXIgPSBkYXRhLmFuc3dlci5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGJvdCByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgYWRkTWVzc2FnZShmb3JtYXR0ZWRBbnN3ZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIaWRlIHR5cGluZyBpbmRpY2F0b3JcclxuICAgICAgICAgICAgICAgIHR5cGluZ0luZGljYXRvci5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBlcnJvciBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlKCdYaW4gbOG7l2ksIMSRw6MgY8OzIGzhu5dpIHjhuqN5IHJhLiBWdWkgbMOybmcgdGjhu60gbOG6oWkgc2F1LicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdG8gc3VnZ2VzdCBjb21tb24gcXVlc3Rpb25zXHJcbiAgICBmdW5jdGlvbiBhZGRTdWdnZXN0ZWRRdWVzdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGVkUXVlc3Rpb25zID0gW1xyXG4gICAgICAgICAgICAnVGjhu7FjIHBo4bqpbSBz4bqhY2ggbMOgIGfDrD8nLFxyXG4gICAgICAgICAgICAnTMOgbSB0aOG6vyBuw6BvIMSR4buDIMSR4bq3dCBow6BuZyB0csOqbiB3ZWJzaXRlPycsXHJcbiAgICAgICAgICAgICdDw6FjIHBoxrDGoW5nIHRo4bupYyB0aGFuaCB0b8OhbiBuw6BvIMSRxrDhu6NjIGNo4bqlcCBuaOG6rW4/JyxcclxuICAgICAgICAgICAgJ1Ro4budaSBnaWFuIGdpYW8gaMOgbmcgbMOgIGJhbyBsw6J1PycsXHJcbiAgICAgICAgICAgICdDaMOtbmggc8OhY2ggxJHhu5VpIHRy4bqjIGjDoG5nIG5oxrAgdGjhur8gbsOgbz8nXHJcbiAgICAgICAgXTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdWdnZXN0aW9uc0RpdiA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ3N1Z2dlc3RlZC1xdWVzdGlvbnMnKTtcclxuICAgICAgICBjb25zdCBzdWdnZXN0aW9uc1RpdGxlID0gJCgnPHA+JykudGV4dCgnQ8OhYyBjw6J1IGjhu49pIHBo4buVIGJp4bq/bjonKTtcclxuICAgICAgICBzdWdnZXN0aW9uc0Rpdi5hcHBlbmQoc3VnZ2VzdGlvbnNUaXRsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnNMaXN0ID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnc3VnZ2VzdGlvbnMtbGlzdCcpO1xyXG4gICAgICAgIHN1Z2dlc3RlZFF1ZXN0aW9ucy5mb3JFYWNoKHF1ZXN0aW9uID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25CdG4gPSAkKCc8YnV0dG9uPicpXHJcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3N1Z2dlc3Rpb24tYnRuJylcclxuICAgICAgICAgICAgICAgIC50ZXh0KHF1ZXN0aW9uKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJRdWVzdGlvbi52YWwocXVlc3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXRGb3JtLnN1Ym1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zTGlzdC5hcHBlbmQocXVlc3Rpb25CdG4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHN1Z2dlc3Rpb25zRGl2LmFwcGVuZChzdWdnZXN0aW9uc0xpc3QpO1xyXG4gICAgICAgIGNoYXRNZXNzYWdlcy5hcHBlbmQoc3VnZ2VzdGlvbnNEaXYpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBZGQgc3VnZ2VzdGVkIHF1ZXN0aW9ucyBhZnRlciBpbml0aWFsIGdyZWV0aW5nXHJcbiAgICBhZGRTdWdnZXN0ZWRRdWVzdGlvbnMoKTtcclxufSk7ICJdLCJtYXBwaW5ncyI6ImFBQUFBLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUNDLEtBQUssQ0FBQyxZQUFXO0VBQ3pCLE1BQU1DLFlBQVksR0FBR0gsQ0FBQyxDQUFDLGVBQWUsQ0FBQztFQUN2QyxNQUFNSSxZQUFZLEdBQUdKLENBQUMsQ0FBQyxlQUFlLENBQUM7RUFDdkMsTUFBTUssUUFBUSxHQUFHTCxDQUFDLENBQUMsV0FBVyxDQUFDO0VBQy9CLE1BQU1NLGVBQWUsR0FBR04sQ0FBQyxDQUFDLGtCQUFrQixDQUFDOztFQUU3QztFQUNBLFNBQVNPLFVBQVVBLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxHQUFHLEtBQUssRUFBRTtJQUN6QyxNQUFNQyxVQUFVLEdBQUdWLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQ1csUUFBUSxDQUFDLFdBQVdGLE1BQU0sR0FBRyxNQUFNLEdBQUcsS0FBSyxFQUFFLENBQUM7SUFDNUUsTUFBTUcsY0FBYyxHQUFHWixDQUFDLENBQUMsT0FBTyxDQUFDLENBQUNXLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDRSxJ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