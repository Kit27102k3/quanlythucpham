"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.findNearestBranch = exports.default = exports.calculateDistance = exports.assignBranchToOrder = void 0;var _Branch = _interopRequireDefault(require("../Model/Branch.js"));
var _axios = _interopRequireDefault(require("axios"));function _interopRequireWildcard(e, t) {if ("function" == typeof WeakMap) var r = new WeakMap(),n = new WeakMap();return (_interopRequireWildcard = function (e, t) {if (!t && e && e.__esModule) return e;var o,i,f = { __proto__: null, default: e };if (null === e || "object" != typeof e && "function" != typeof e) return f;if (o = t ? n : r) {if (o.has(e)) return o.get(e);o.set(e, f);}for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]);return f;})(e, t);}

// Tìm chi nhánh gần nhất dựa trên địa chỉ
const findNearestBranch = async (address, coordinates = null) => {
  try {
    // Lấy tất cả chi nhánh
    const branches = await _Branch.default.find({ isActive: true });

    if (!branches || branches.length === 0) {
      console.log("Không tìm thấy chi nhánh nào");
      return null;
    }

    // Nếu có tọa độ sẵn, sử dụng tọa độ để tính khoảng cách
    if (coordinates && coordinates.lat && coordinates.lng) {
      const branchesWithDistance = branches.map((branch) => {
        const distance = calculateDistance(
          coordinates.lat,
          coordinates.lng,
          branch.latitude,
          branch.longitude
        );
        return { branch, distance };
      });

      // Sắp xếp theo khoảng cách và trả về chi nhánh gần nhất
      branchesWithDistance.sort((a, b) => a.distance - b.distance);
      return branchesWithDistance[0].branch;
    }

    // Nếu không có tọa độ, tìm kiếm trong địa chỉ
    const addressLower = address.toLowerCase();

    // Tìm chi nhánh phù hợp nhất dựa trên địa chỉ
    for (const branch of branches) {
      const branchAddress = branch.address ? branch.address.toLowerCase() : '';
      const branchCity = branch.city ? branch.city.toLowerCase() : '';

      // Tách địa chỉ chi nhánh thành các phần nhỏ
      const addressParts = branchAddress.split(',').map((part) => part.trim());

      // Kiểm tra xem địa chỉ giao hàng có chứa tên quận/huyện/thành phố của chi nhánh không
      if (addressParts.some((part) => addressLower.includes(part)) ||
      addressLower.includes(branchCity)) {
        return branch;
      }
    }

    // Nếu không tìm thấy chi nhánh phù hợp, trả về chi nhánh đầu tiên
    return branches[0];
  } catch (error) {
    console.error("Lỗi khi tìm chi nhánh gần nhất:", error);
    return null;
  }
};

// Hàm tính khoảng cách giữa hai tọa độ (đơn vị: km)
exports.findNearestBranch = findNearestBranch;const calculateDistance = (lat1, lon1, lat2, lon2) => {
  if (!lat1 || !lon1 || !lat2 || !lon2) return Infinity;

  const R = 6371; // Bán kính trái đất tính bằng km
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLon = (lon2 - lon1) * Math.PI / 180;
  const a =
  Math.sin(dLat / 2) * Math.sin(dLat / 2) +
  Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
  Math.sin(dLon / 2) * Math.sin(dLon / 2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  const distance = R * c; // Khoảng cách tính bằng km

  return distance;
};

// Hàm phân công chi nhánh cho đơn hàng dựa trên địa chỉ giao hàng
exports.calculateDistance = calculateDistance;const assignBranchToOrder = async (orderId, address, coordinates = null) => {
  try {
    // Tìm chi nhánh gần nhất
    const nearestBranch = await findNearestBranch(address, coordinates);

    if (!nearestBranch) {
      console.log("Không tìm thấy chi nhánh phù hợp cho đơn hàng:", orderId);
      return false;
    }

    // Cập nhật đơn hàng với branchId
    // Giả sử bạn có một Order model đã import
    const Order = (await Promise.resolve().then(() => _interopRequireWildcard(require("../Model/Order.js")))).default;
    const updatedOrder = await Order.findByIdAndUpdate(
      orderId,
      { branchId: nearestBranch._id },
      { new: true }
    );

    if (updatedOrder) {
      console.log(`Đơn hàng ${orderId} được phân công cho chi nhánh: ${nearestBranch.name}`);
      return true;
    }

    return false;
  } catch (error) {
    console.error("Lỗi khi phân công chi nhánh cho đơn hàng:", error);
    return false;
  }
};exports.assignBranchToOrder = assignBranchToOrder;var _default = exports.default =

{
  findNearestBranch,
  calculateDistance,
  assignBranchToOrder
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQnJhbmNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYXhpb3MiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImZpbmROZWFyZXN0QnJhbmNoIiwiYWRkcmVzcyIsImNvb3JkaW5hdGVzIiwiYnJhbmNoZXMiLCJCcmFuY2giLCJmaW5kIiwiaXNBY3RpdmUiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwibGF0IiwibG5nIiwiYnJhbmNoZXNXaXRoRGlzdGFuY2UiLCJtYXAiLCJicmFuY2giLCJkaXN0YW5jZSIsImNhbGN1bGF0ZURpc3RhbmNlIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJzb3J0IiwiYSIsImIiLCJhZGRyZXNzTG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImJyYW5jaEFkZHJlc3MiLCJicmFuY2hDaXR5IiwiY2l0eSIsImFkZHJlc3NQYXJ0cyIsInNwbGl0IiwicGFydCIsInRyaW0iLCJzb21lIiwiaW5jbHVkZXMiLCJlcnJvciIsImV4cG9ydHMiLCJsYXQxIiwibG9uMSIsImxhdDIiLCJsb24yIiwiSW5maW5pdHkiLCJSIiwiZExhdCIsIk1hdGgiLCJQSSIsImRMb24iLCJzaW4iLCJjb3MiLCJjIiwiYXRhbjIiLCJzcXJ0IiwiYXNzaWduQnJhbmNoVG9PcmRlciIsIm9yZGVySWQiLCJuZWFyZXN0QnJhbmNoIiwiT3JkZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJ1cGRhdGVkT3JkZXIiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsImJyYW5jaElkIiwiX2lkIiwibmV3IiwibmFtZSIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL1NlcnZpY2VzL2JyYW5jaFNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJyYW5jaCBmcm9tIFwiLi4vTW9kZWwvQnJhbmNoLmpzXCI7XHJcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuXHJcbi8vIFTDrG0gY2hpIG5ow6FuaCBn4bqnbiBuaOG6pXQgZOG7sWEgdHLDqm4gxJHhu4thIGNo4buJXHJcbmV4cG9ydCBjb25zdCBmaW5kTmVhcmVzdEJyYW5jaCA9IGFzeW5jIChhZGRyZXNzLCBjb29yZGluYXRlcyA9IG51bGwpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gTOG6pXkgdOG6pXQgY+G6oyBjaGkgbmjDoW5oXHJcbiAgICBjb25zdCBicmFuY2hlcyA9IGF3YWl0IEJyYW5jaC5maW5kKHsgaXNBY3RpdmU6IHRydWUgfSk7XHJcbiAgICBcclxuICAgIGlmICghYnJhbmNoZXMgfHwgYnJhbmNoZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiS2jDtG5nIHTDrG0gdGjhuqV5IGNoaSBuaMOhbmggbsOgb1wiKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE7hur91IGPDsyB04buNYSDEkeG7mSBz4bq1biwgc+G7rSBk4bulbmcgdOG7jWEgxJHhu5kgxJHhu4MgdMOtbmgga2hv4bqjbmcgY8OhY2hcclxuICAgIGlmIChjb29yZGluYXRlcyAmJiBjb29yZGluYXRlcy5sYXQgJiYgY29vcmRpbmF0ZXMubG5nKSB7XHJcbiAgICAgIGNvbnN0IGJyYW5jaGVzV2l0aERpc3RhbmNlID0gYnJhbmNoZXMubWFwKGJyYW5jaCA9PiB7XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBjYWxjdWxhdGVEaXN0YW5jZShcclxuICAgICAgICAgIGNvb3JkaW5hdGVzLmxhdCxcclxuICAgICAgICAgIGNvb3JkaW5hdGVzLmxuZyxcclxuICAgICAgICAgIGJyYW5jaC5sYXRpdHVkZSxcclxuICAgICAgICAgIGJyYW5jaC5sb25naXR1ZGVcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB7IGJyYW5jaCwgZGlzdGFuY2UgfTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBT4bqvcCB44bq/cCB0aGVvIGtob+G6o25nIGPDoWNoIHbDoCB0cuG6oyB24buBIGNoaSBuaMOhbmggZ+G6p24gbmjhuqV0XHJcbiAgICAgIGJyYW5jaGVzV2l0aERpc3RhbmNlLnNvcnQoKGEsIGIpID0+IGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlKTtcclxuICAgICAgcmV0dXJuIGJyYW5jaGVzV2l0aERpc3RhbmNlWzBdLmJyYW5jaDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTuG6v3Uga2jDtG5nIGPDsyB04buNYSDEkeG7mSwgdMOsbSBraeG6v20gdHJvbmcgxJHhu4thIGNo4buJXHJcbiAgICBjb25zdCBhZGRyZXNzTG93ZXIgPSBhZGRyZXNzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBcclxuICAgIC8vIFTDrG0gY2hpIG5ow6FuaCBwaMO5IGjhu6NwIG5o4bqldCBk4buxYSB0csOqbiDEkeG7i2EgY2jhu4lcclxuICAgIGZvciAoY29uc3QgYnJhbmNoIG9mIGJyYW5jaGVzKSB7XHJcbiAgICAgIGNvbnN0IGJyYW5jaEFkZHJlc3MgPSBicmFuY2guYWRkcmVzcyA/IGJyYW5jaC5hZGRyZXNzLnRvTG93ZXJDYXNlKCkgOiAnJztcclxuICAgICAgY29uc3QgYnJhbmNoQ2l0eSA9IGJyYW5jaC5jaXR5ID8gYnJhbmNoLmNpdHkudG9Mb3dlckNhc2UoKSA6ICcnO1xyXG4gICAgICBcclxuICAgICAgLy8gVMOhY2ggxJHhu4thIGNo4buJIGNoaSBuaMOhbmggdGjDoG5oIGPDoWMgcGjhuqduIG5o4buPXHJcbiAgICAgIGNvbnN0IGFkZHJlc3NQYXJ0cyA9IGJyYW5jaEFkZHJlc3Muc3BsaXQoJywnKS5tYXAocGFydCA9PiBwYXJ0LnRyaW0oKSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBLaeG7g20gdHJhIHhlbSDEkeG7i2EgY2jhu4kgZ2lhbyBow6BuZyBjw7MgY2jhu6lhIHTDqm4gcXXhuq1uL2h1eeG7h24vdGjDoG5oIHBo4buRIGPhu6dhIGNoaSBuaMOhbmgga2jDtG5nXHJcbiAgICAgIGlmIChhZGRyZXNzUGFydHMuc29tZShwYXJ0ID0+IGFkZHJlc3NMb3dlci5pbmNsdWRlcyhwYXJ0KSkgfHwgXHJcbiAgICAgICAgICBhZGRyZXNzTG93ZXIuaW5jbHVkZXMoYnJhbmNoQ2l0eSkpIHtcclxuICAgICAgICByZXR1cm4gYnJhbmNoO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE7hur91IGtow7RuZyB0w6xtIHRo4bqleSBjaGkgbmjDoW5oIHBow7kgaOG7o3AsIHRy4bqjIHbhu4EgY2hpIG5ow6FuaCDEkeG6p3UgdGnDqm5cclxuICAgIHJldHVybiBicmFuY2hlc1swXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkzhu5dpIGtoaSB0w6xtIGNoaSBuaMOhbmggZ+G6p24gbmjhuqV0OlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG4vLyBIw6BtIHTDrW5oIGtob+G6o25nIGPDoWNoIGdp4buvYSBoYWkgdOG7jWEgxJHhu5kgKMSRxqFuIHbhu4s6IGttKVxyXG5leHBvcnQgY29uc3QgY2FsY3VsYXRlRGlzdGFuY2UgPSAobGF0MSwgbG9uMSwgbGF0MiwgbG9uMikgPT4ge1xyXG4gIGlmICghbGF0MSB8fCAhbG9uMSB8fCAhbGF0MiB8fCAhbG9uMikgcmV0dXJuIEluZmluaXR5O1xyXG4gIFxyXG4gIGNvbnN0IFIgPSA2MzcxOyAvLyBCw6FuIGvDrW5oIHRyw6FpIMSR4bqldCB0w61uaCBi4bqxbmcga21cclxuICBjb25zdCBkTGF0ID0gKGxhdDIgLSBsYXQxKSAqIE1hdGguUEkgLyAxODA7XHJcbiAgY29uc3QgZExvbiA9IChsb24yIC0gbG9uMSkgKiBNYXRoLlBJIC8gMTgwO1xyXG4gIGNvbnN0IGEgPSBcclxuICAgIE1hdGguc2luKGRMYXQvMikgKiBNYXRoLnNpbihkTGF0LzIpICtcclxuICAgIE1hdGguY29zKGxhdDEgKiBNYXRoLlBJIC8gMTgwKSAqIE1hdGguY29zKGxhdDIgKiBNYXRoLlBJIC8gMTgwKSAqIFxyXG4gICAgTWF0aC5zaW4oZExvbi8yKSAqIE1hdGguc2luKGRMb24vMik7XHJcbiAgY29uc3QgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpO1xyXG4gIGNvbnN0IGRpc3RhbmNlID0gUiAqIGM7IC8vIEtob+G6o25nIGPDoWNoIHTDrW5oIGLhurFuZyBrbVxyXG4gIFxyXG4gIHJldHVybiBkaXN0YW5jZTtcclxufTtcclxuXHJcbi8vIEjDoG0gcGjDom4gY8O0bmcgY2hpIG5ow6FuaCBjaG8gxJHGoW4gaMOgbmcgZOG7sWEgdHLDqm4gxJHhu4thIGNo4buJIGdpYW8gaMOgbmdcclxuZXhwb3J0IGNvbnN0IGFzc2lnbkJyYW5jaFRvT3JkZXIgPSBhc3luYyAob3JkZXJJZCwgYWRkcmVzcywgY29vcmRpbmF0ZXMgPSBudWxsKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFTDrG0gY2hpIG5ow6FuaCBn4bqnbiBuaOG6pXRcclxuICAgIGNvbnN0IG5lYXJlc3RCcmFuY2ggPSBhd2FpdCBmaW5kTmVhcmVzdEJyYW5jaChhZGRyZXNzLCBjb29yZGluYXRlcyk7XHJcbiAgICBcclxuICAgIGlmICghbmVhcmVzdEJyYW5jaCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIktow7RuZyB0w6xtIHRo4bqleSBjaGkgbmjDoW5oIHBow7kgaOG7o3AgY2hvIMSRxqFuIGjDoG5nOlwiLCBvcmRlcklkKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBD4bqtcCBuaOG6rXQgxJHGoW4gaMOgbmcgduG7m2kgYnJhbmNoSWRcclxuICAgIC8vIEdp4bqjIHPhu60gYuG6oW4gY8OzIG3hu5l0IE9yZGVyIG1vZGVsIMSRw6MgaW1wb3J0XHJcbiAgICBjb25zdCBPcmRlciA9IChhd2FpdCBpbXBvcnQoXCIuLi9Nb2RlbC9PcmRlci5qc1wiKSkuZGVmYXVsdDtcclxuICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgICBvcmRlcklkLFxyXG4gICAgICB7IGJyYW5jaElkOiBuZWFyZXN0QnJhbmNoLl9pZCB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSB9XHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBpZiAodXBkYXRlZE9yZGVyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDEkMahbiBow6BuZyAke29yZGVySWR9IMSRxrDhu6NjIHBow6JuIGPDtG5nIGNobyBjaGkgbmjDoW5oOiAke25lYXJlc3RCcmFuY2gubmFtZX1gKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkzhu5dpIGtoaSBwaMOibiBjw7RuZyBjaGkgbmjDoW5oIGNobyDEkcahbiBow6BuZzpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBmaW5kTmVhcmVzdEJyYW5jaCxcclxuICBjYWxjdWxhdGVEaXN0YW5jZSxcclxuICBhc3NpZ25CcmFuY2hUb09yZGVyXHJcbn07ICJdLCJtYXBwaW5ncyI6IitRQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQSxXQUEwQixTQUFBRSx3QkFBQUMsQ0FBQSxFQUFBQyxDQUFBLDRCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxHQUFBRSxDQUFBLE9BQUFGLE9BQUEsV0FBQUgsdUJBQUEsWUFB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