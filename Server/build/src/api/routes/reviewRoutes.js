"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _express = _interopRequireDefault(require("express"));
var _reviewController = require("../controllers/reviewController.js");








var _authMiddleware = require("../middleware/authMiddleware.js");function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

const router = _express.default.Router();

// Lấy đánh giá của một sản phẩm (public)
router.get('/product/:productId', _reviewController.getProductReviews);

// Lấy thống kê đánh giá của sản phẩm (public)
router.get('/stats/:productId', _reviewController.getProductReviewStats);

// Các route yêu cầu đăng nhập
router.use(_authMiddleware.verifyToken);

// Tạo đánh giá mới
router.post('/', _reviewController.createReview);

// Cập nhật đánh giá
router.put('/:id', _reviewController.updateReview);

// Xóa đánh giá
router.delete('/:id', _reviewController.deleteReview);

// Phản hồi đánh giá 
router.post('/:id/reply', _reviewController.replyToReview);

// Các route yêu cầu quyền admin
router.use(_authMiddleware.checkAdmin);

// Cập nhật lại tất cả thống kê đánh giá (admin only)
router.post('/recalculate', _reviewController.recalculateAllReviewStats);var _default = exports.default =

router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Jldmlld0NvbnRyb2xsZXIiLCJfYXV0aE1pZGRsZXdhcmUiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZ2V0IiwiZ2V0UHJvZHVjdFJldmlld3MiLCJnZXRQcm9kdWN0UmV2aWV3U3RhdHMiLCJ1c2UiLCJ2ZXJpZnlUb2tlbiIsInBvc3QiLCJjcmVhdGVSZXZpZXciLCJwdXQiLCJ1cGRhdGVSZXZpZXciLCJkZWxldGUiLCJkZWxldGVSZXZpZXciLCJyZXBseVRvUmV2aWV3IiwiY2hlY2tBZG1pbiIsInJlY2FsY3VsYXRlQWxsUmV2aWV3U3RhdHMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpL3JvdXRlcy9yZXZpZXdSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCB7XHJcbiAgY3JlYXRlUmV2aWV3LFxyXG4gIGdldFByb2R1Y3RSZXZpZXdzLFxyXG4gIHVwZGF0ZVJldmlldyxcclxuICBkZWxldGVSZXZpZXcsXHJcbiAgcmVwbHlUb1JldmlldyxcclxuICBnZXRQcm9kdWN0UmV2aWV3U3RhdHMsXHJcbiAgcmVjYWxjdWxhdGVBbGxSZXZpZXdTdGF0c1xyXG59IGZyb20gJy4uL2NvbnRyb2xsZXJzL3Jldmlld0NvbnRyb2xsZXIuanMnO1xyXG5pbXBvcnQgeyB2ZXJpZnlUb2tlbiwgY2hlY2tBZG1pbiB9IGZyb20gJy4uL21pZGRsZXdhcmUvYXV0aE1pZGRsZXdhcmUuanMnO1xyXG5cclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbi8vIEzhuqV5IMSRw6FuaCBnacOhIGPhu6dhIG3hu5l0IHPhuqNuIHBo4bqpbSAocHVibGljKVxyXG5yb3V0ZXIuZ2V0KCcvcHJvZHVjdC86cHJvZHVjdElkJywgZ2V0UHJvZHVjdFJldmlld3MpO1xyXG5cclxuLy8gTOG6pXkgdGjhu5FuZyBrw6ogxJHDoW5oIGdpw6EgY+G7p2Egc+G6o24gcGjhuqltIChwdWJsaWMpXHJcbnJvdXRlci5nZXQoJy9zdGF0cy86cHJvZHVjdElkJywgZ2V0UHJvZHVjdFJldmlld1N0YXRzKTtcclxuXHJcbi8vIEPDoWMgcm91dGUgecOqdSBj4bqndSDEkcSDbmcgbmjhuq1wXHJcbnJvdXRlci51c2UodmVyaWZ5VG9rZW4pO1xyXG5cclxuLy8gVOG6oW8gxJHDoW5oIGdpw6EgbeG7m2lcclxucm91dGVyLnBvc3QoJy8nLCBjcmVhdGVSZXZpZXcpO1xyXG5cclxuLy8gQ+G6rXAgbmjhuq10IMSRw6FuaCBnacOhXHJcbnJvdXRlci5wdXQoJy86aWQnLCB1cGRhdGVSZXZpZXcpO1xyXG5cclxuLy8gWMOzYSDEkcOhbmggZ2nDoVxyXG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgZGVsZXRlUmV2aWV3KTtcclxuXHJcbi8vIFBo4bqjbiBo4buTaSDEkcOhbmggZ2nDoSBcclxucm91dGVyLnBvc3QoJy86aWQvcmVwbHknLCByZXBseVRvUmV2aWV3KTtcclxuXHJcbi8vIEPDoWMgcm91dGUgecOqdSBj4bqndSBxdXnhu4FuIGFkbWluXHJcbnJvdXRlci51c2UoY2hlY2tBZG1pbik7XHJcblxyXG4vLyBD4bqtcCBuaOG6rXQgbOG6oWkgdOG6pXQgY+G6oyB0aOG7kW5nIGvDqiDEkcOhbmggZ2nDoSAoYWRtaW4gb25seSlcclxucm91dGVyLnBvc3QoJy9yZWNhbGN1bGF0ZScsIHJlY2FsY3VsYXRlQWxsUmV2aWV3U3RhdHMpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyAiXSwibWFwcGluZ3MiOiJvR0FBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxpQkFBQSxHQUFBRCxPQUFBOzs7Ozs7Ozs7QUFTQSxJQUFBRSxlQUFBLEdBQUFGLE9BQUEsb0NBQTBFLFNBQUFELHVCQUFBSSxDQUFBLFVBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBOztBQUUxRSxNQUFNRyxNQUFNLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDOztBQUUvQjtBQUNBRixNQUFNLENBQUNHLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRUMsbUNBQWlCLENBQUM7O0FBRXBEO0FBQ0FKLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLG1CQUFtQixFQUFFRSx1Q0FBcUIsQ0FBQzs7QUFFdEQ7QUFDQUwsTUFBTSxDQUFDTSxHQUFHLENBQUNDLDJCQUFXLENBQUM7O0FBRXZCO0FBQ0FQLE1BQU0sQ0FBQ1EsSUFBSSxDQUFDLEdBQUcsRUFBRUMsOEJBQVksQ0FBQzs7QUFFOUI7QUFDQVQsTUFBTSxDQUFDVSxHQUFHLENBQUMsTUFBTSxFQUFFQyw4QkFBWSxDQUFDOztBQUVoQztBQUNBWCxNQUFNLENBQUNZLE1BQU0sQ0FBQyxNQUFNLEVBQUVDLDhCQUFZLENBQUM7O0FBRW5DO0FBQ0FiLE1BQU0sQ0FBQ1EsSUFBSSxDQUFDLFlBQVksRUFBRU0sK0JBQWEsQ0FBQzs7QUFFeEM7QUFDQWQsTUFBTSxDQUFDTSxHQUFHLENBQUNTLDBCQUFVLENBQUM7O0FBRXRCO0FBQ0FmLE1BQU0sQ0FBQ1EsSUFBSSxDQUFDLGNBQWMsRUFBRVEsMkNBQXlCLENBQUMsQ0FBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQW5CLE9BQUE7O0FBRXhDQyxNQUFNIiwiaWdub3JlTGlzdCI6W119