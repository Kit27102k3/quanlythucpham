"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _express = _interopRequireDefault(require("express"));
var _reviewController = require("../controllers/reviewController.js");








var _authMiddleware = require("../middleware/authMiddleware.js");

const router = _express.default.Router();

// Lấy đánh giá của một sản phẩm (public)
router.get('/product/:productId', _reviewController.getProductReviews);

// Lấy thống kê đánh giá của sản phẩm (public)
router.get('/stats/:productId', _reviewController.getProductReviewStats);

// Các route yêu cầu đăng nhập
router.use(_authMiddleware.verifyToken);

// Tạo đánh giá mới
router.post('/', _reviewController.createReview);

// Cập nhật đánh giá
router.put('/:id', _reviewController.updateReview);

// Xóa đánh giá
router.delete('/:id', _reviewController.deleteReview);

// Phản hồi đánh giá 
router.post('/:id/reply', _reviewController.replyToReview);

// Các route yêu cầu quyền admin
router.use(_authMiddleware.checkAdmin);

// Cập nhật lại tất cả thống kê đánh giá (admin only)
router.post('/recalculate', _reviewController.recalculateAllReviewStats);var _default = exports.default =

router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3Jldmlld0NvbnRyb2xsZXIiLCJfYXV0aE1pZGRsZXdhcmUiLCJyb3V0ZXIiLCJleHByZXNzIiwiUm91dGVyIiwiZ2V0IiwiZ2V0UHJvZHVjdFJldmlld3MiLCJnZXRQcm9kdWN0UmV2aWV3U3RhdHMiLCJ1c2UiLCJ2ZXJpZnlUb2tlbiIsInBvc3QiLCJjcmVhdGVSZXZpZXciLCJwdXQiLCJ1cGRhdGVSZXZpZXciLCJkZWxldGUiLCJkZWxldGVSZXZpZXciLCJyZXBseVRvUmV2aWV3IiwiY2hlY2tBZG1pbiIsInJlY2FsY3VsYXRlQWxsUmV2aWV3U3RhdHMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaS9yb3V0ZXMvcmV2aWV3Um91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVJldmlldyxcclxuICBnZXRQcm9kdWN0UmV2aWV3cyxcclxuICB1cGRhdGVSZXZpZXcsXHJcbiAgZGVsZXRlUmV2aWV3LFxyXG4gIHJlcGx5VG9SZXZpZXcsXHJcbiAgZ2V0UHJvZHVjdFJldmlld1N0YXRzLFxyXG4gIHJlY2FsY3VsYXRlQWxsUmV2aWV3U3RhdHNcclxufSBmcm9tICcuLi9jb250cm9sbGVycy9yZXZpZXdDb250cm9sbGVyLmpzJztcclxuaW1wb3J0IHsgdmVyaWZ5VG9rZW4sIGNoZWNrQWRtaW4gfSBmcm9tICcuLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlLmpzJztcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG4vLyBM4bqleSDEkcOhbmggZ2nDoSBj4bunYSBt4buZdCBz4bqjbiBwaOG6qW0gKHB1YmxpYylcclxucm91dGVyLmdldCgnL3Byb2R1Y3QvOnByb2R1Y3RJZCcsIGdldFByb2R1Y3RSZXZpZXdzKTtcclxuXHJcbi8vIEzhuqV5IHRo4buRbmcga8OqIMSRw6FuaCBnacOhIGPhu6dhIHPhuqNuIHBo4bqpbSAocHVibGljKVxyXG5yb3V0ZXIuZ2V0KCcvc3RhdHMvOnByb2R1Y3RJZCcsIGdldFByb2R1Y3RSZXZpZXdTdGF0cyk7XHJcblxyXG4vLyBDw6FjIHJvdXRlIHnDqnUgY+G6p3UgxJHEg25nIG5o4bqtcFxyXG5yb3V0ZXIudXNlKHZlcmlmeVRva2VuKTtcclxuXHJcbi8vIFThuqFvIMSRw6FuaCBnacOhIG3hu5tpXHJcbnJvdXRlci5wb3N0KCcvJywgY3JlYXRlUmV2aWV3KTtcclxuXHJcbi8vIEPhuq1wIG5o4bqtdCDEkcOhbmggZ2nDoVxyXG5yb3V0ZXIucHV0KCcvOmlkJywgdXBkYXRlUmV2aWV3KTtcclxuXHJcbi8vIFjDs2EgxJHDoW5oIGdpw6Fcclxucm91dGVyLmRlbGV0ZSgnLzppZCcsIGRlbGV0ZVJldmlldyk7XHJcblxyXG4vLyBQaOG6o24gaOG7k2kgxJHDoW5oIGdpw6EgXHJcbnJvdXRlci5wb3N0KCcvOmlkL3JlcGx5JywgcmVwbHlUb1Jldmlldyk7XHJcblxyXG4vLyBDw6FjIHJvdXRlIHnDqnUgY+G6p3UgcXV54buBbiBhZG1pblxyXG5yb3V0ZXIudXNlKGNoZWNrQWRtaW4pO1xyXG5cclxuLy8gQ+G6rXAgbmjhuq10IGzhuqFpIHThuqV0IGPhuqMgdGjhu5FuZyBrw6ogxJHDoW5oIGdpw6EgKGFkbWluIG9ubHkpXHJcbnJvdXRlci5wb3N0KCcvcmVjYWxjdWxhdGUnLCByZWNhbGN1bGF0ZUFsbFJldmlld1N0YXRzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsgIl0sIm1hcHBpbmdzIjoieUxBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsaUJBQUEsR0FBQUQsT0FBQTs7Ozs7Ozs7O0FBU0EsSUFBQUUsZUFBQSxHQUFBRixPQUFBOztBQUVBLE1BQU1HLE1BQU0sR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7O0FBRS9CO0FBQ0FGLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLHFCQUFxQixFQUFFQyxtQ0FBaUIsQ0FBQzs7QUFFcEQ7QUFDQUosTUFBTSxDQUFDRyxHQUFHLENBQUMsbUJBQW1CLEVBQUVFLHVDQUFxQixDQUFDOztBQUV0RDtBQUNBTCxNQUFNLENBQUNNLEdBQUcsQ0FBQ0MsMkJBQVcsQ0FBQzs7QUFFdkI7QUFDQVAsTUFBTSxDQUFDUSxJQUFJLENBQUMsR0FBRyxFQUFFQyw4QkFBWSxDQUFDOztBQUU5QjtBQUNBVCxNQUFNLENBQUNVLEdBQUcsQ0FBQyxNQUFNLEVBQUVDLDhCQUFZLENBQUM7O0FBRWhDO0FBQ0FYLE1BQU0sQ0FBQ1ksTUFBTSxDQUFDLE1BQU0sRUFBRUMsOEJBQVksQ0FBQzs7QUFFbkM7QUFDQWIsTUFBTSxDQUFDUSxJQUFJLENBQUMsWUFBWSxFQUFFTSwrQkFBYSxDQUFDOztBQUV4QztBQUNBZCxNQUFNLENBQUNNLEdBQUcsQ0FBQ1MsMEJBQVUsQ0FBQzs7QUFFdEI7QUFDQWYsTUFBTSxDQUFDUSxJQUFJLENBQUMsY0FBYyxFQUFFUSwyQ0FBeUIsQ0FBQyxDQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBOztBQUV4Q25CLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=