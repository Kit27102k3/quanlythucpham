"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.updateSupplier = exports.searchSuppliers = exports.getSupplierById = exports.getAllSuppliers = exports.deleteSupplier = exports.createSupplier = void 0;var _Supplier = _interopRequireDefault(require("../Model/Supplier.js"));
var _asyncHandler = require("../Middleware/asyncHandler.js");function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

// @desc    Get all suppliers
// @route   GET /api/suppliers
// @access  Private/Admin
const getAllSuppliers = exports.getAllSuppliers = (0, _asyncHandler.asyncHandler)(async (req, res) => {
  const suppliers = await _Supplier.default.find({}).sort({ createdAt: -1 });

  return res.status(200).json(suppliers);
});

// @desc    Get a single supplier
// @route   GET /api/suppliers/:id
// @access  Private/Admin
const getSupplierById = exports.getSupplierById = (0, _asyncHandler.asyncHandler)(async (req, res) => {
  const supplier = await _Supplier.default.findById(req.params.id);

  if (!supplier) {
    return res.status(404).json({
      success: false,
      message: "Không tìm thấy nhà cung cấp"
    });
  }

  return res.status(200).json(supplier);
});

// @desc    Create a new supplier
// @route   POST /api/suppliers
// @access  Private/Admin
const createSupplier = exports.createSupplier = (0, _asyncHandler.asyncHandler)(async (req, res) => {
  const { name, phone } = req.body;
  let { code } = req.body;

  // Kiểm tra thông tin bắt buộc
  if (!name || !phone) {
    return res.status(400).json({
      success: false,
      message: "Vui lòng cung cấp tên và số điện thoại"
    });
  }

  // Nếu không có mã, tự động tạo mã ngẫu nhiên 6 chữ số
  if (!code) {
    code = Math.floor(100000 + Math.random() * 900000).toString();
    req.body.code = code;
  }

  // Kiểm tra xem code đã tồn tại chưa
  const existingSupplier = await _Supplier.default.findOne({ code });
  if (existingSupplier) {
    return res.status(400).json({
      success: false,
      message: "Mã nhà cung cấp đã tồn tại"
    });
  }

  // Thêm thông tin người tạo nếu có
  if (req.user && req.user._id) {
    req.body.createdBy = req.user._id;
  }

  const supplier = await _Supplier.default.create(req.body);

  return res.status(201).json({
    success: true,
    message: "Thêm nhà cung cấp thành công",
    supplier
  });
});

// @desc    Update a supplier
// @route   PUT /api/suppliers/:id
// @access  Private/Admin
const updateSupplier = exports.updateSupplier = (0, _asyncHandler.asyncHandler)(async (req, res) => {
  let supplier = await _Supplier.default.findById(req.params.id);

  if (!supplier) {
    return res.status(404).json({
      success: false,
      message: "Không tìm thấy nhà cung cấp"
    });
  }

  // Kiểm tra thông tin bắt buộc
  if (!req.body.name || !req.body.phone) {
    return res.status(400).json({
      success: false,
      message: "Vui lòng cung cấp tên và số điện thoại"
    });
  }

  // Nếu không có mã, tự động tạo mã ngẫu nhiên 6 chữ số
  if (!req.body.code) {
    req.body.code = Math.floor(100000 + Math.random() * 900000).toString();
  }

  // Nếu cập nhật mã nhà cung cấp (code), phải kiểm tra xem mã đã tồn tại chưa
  if (req.body.code && req.body.code !== supplier.code) {
    const existingSupplier = await _Supplier.default.findOne({
      code: req.body.code,
      _id: { $ne: req.params.id }
    });

    if (existingSupplier) {
      return res.status(400).json({
        success: false,
        message: "Mã nhà cung cấp đã tồn tại"
      });
    }
  }

  // Thêm thông tin người cập nhật nếu có
  if (req.user && req.user._id) {
    req.body.updatedBy = req.user._id;
  }

  supplier = await _Supplier.default.findByIdAndUpdate(req.params.id, req.body, {
    new: true,
    runValidators: true
  });

  return res.status(200).json({
    success: true,
    message: "Cập nhật nhà cung cấp thành công",
    supplier
  });
});

// @desc    Delete a supplier
// @route   DELETE /api/suppliers/:id
// @access  Private/Admin
const deleteSupplier = exports.deleteSupplier = (0, _asyncHandler.asyncHandler)(async (req, res) => {
  const supplier = await _Supplier.default.findById(req.params.id);

  if (!supplier) {
    return res.status(404).json({
      success: false,
      message: "Không tìm thấy nhà cung cấp"
    });
  }

  await supplier.deleteOne();

  return res.status(200).json({
    success: true,
    message: "Xóa nhà cung cấp thành công"
  });
});

// @desc    Search suppliers
// @route   GET /api/suppliers/search
// @access  Private/Admin
const searchSuppliers = exports.searchSuppliers = (0, _asyncHandler.asyncHandler)(async (req, res) => {
  const { query = "" } = req.query;

  const searchCondition = {
    $or: [
    { name: { $regex: query, $options: "i" } },
    { code: { $regex: query, $options: "i" } },
    { contactPerson: { $regex: query, $options: "i" } },
    { phone: { $regex: query, $options: "i" } },
    { email: { $regex: query, $options: "i" } }]

  };

  const suppliers = await _Supplier.default.find(searchCondition).sort({ createdAt: -1 });

  return res.status(200).json(suppliers);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfU3VwcGxpZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY0hhbmRsZXIiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJnZXRBbGxTdXBwbGllcnMiLCJleHBvcnRzIiwiYXN5bmNIYW5kbGVyIiwicmVxIiwicmVzIiwic3VwcGxpZXJzIiwiU3VwcGxpZXIiLCJmaW5kIiwic29ydCIsImNyZWF0ZWRBdCIsInN0YXR1cyIsImpzb24iLCJnZXRTdXBwbGllckJ5SWQiLCJzdXBwbGllciIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJzdWNjZXNzIiwibWVzc2FnZSIsImNyZWF0ZVN1cHBsaWVyIiwibmFtZSIsInBob25lIiwiYm9keSIsImNvZGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsImV4aXN0aW5nU3VwcGxpZXIiLCJmaW5kT25lIiwidXNlciIsIl9pZCIsImNyZWF0ZWRCeSIsImNyZWF0ZSIsInVwZGF0ZVN1cHBsaWVyIiwiJG5lIiwidXBkYXRlZEJ5IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJuZXciLCJydW5WYWxpZGF0b3JzIiwiZGVsZXRlU3VwcGxpZXIiLCJkZWxldGVPbmUiLCJzZWFyY2hTdXBwbGllcnMiLCJxdWVyeSIsInNlYXJjaENvbmRpdGlvbiIsIiRvciIsIiRyZWdleCIsIiRvcHRpb25zIiwiY29udGFjdFBlcnNvbiIsImVtYWlsIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL0NvbnRyb2xsZXIvc3VwcGxpZXJDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdXBwbGllciBmcm9tIFwiLi4vTW9kZWwvU3VwcGxpZXIuanNcIjtcclxuaW1wb3J0IHsgYXN5bmNIYW5kbGVyIH0gZnJvbSBcIi4uL01pZGRsZXdhcmUvYXN5bmNIYW5kbGVyLmpzXCI7XHJcblxyXG4vLyBAZGVzYyAgICBHZXQgYWxsIHN1cHBsaWVyc1xyXG4vLyBAcm91dGUgICBHRVQgL2FwaS9zdXBwbGllcnNcclxuLy8gQGFjY2VzcyAgUHJpdmF0ZS9BZG1pblxyXG5leHBvcnQgY29uc3QgZ2V0QWxsU3VwcGxpZXJzID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHN1cHBsaWVycyA9IGF3YWl0IFN1cHBsaWVyLmZpbmQoe30pLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pO1xyXG4gIFxyXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihzdXBwbGllcnMpO1xyXG59KTtcclxuXHJcbi8vIEBkZXNjICAgIEdldCBhIHNpbmdsZSBzdXBwbGllclxyXG4vLyBAcm91dGUgICBHRVQgL2FwaS9zdXBwbGllcnMvOmlkXHJcbi8vIEBhY2Nlc3MgIFByaXZhdGUvQWRtaW5cclxuZXhwb3J0IGNvbnN0IGdldFN1cHBsaWVyQnlJZCA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBzdXBwbGllciA9IGF3YWl0IFN1cHBsaWVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gIFxyXG4gIGlmICghc3VwcGxpZXIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiBcIktow7RuZyB0w6xtIHRo4bqleSBuaMOgIGN1bmcgY+G6pXBcIixcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oc3VwcGxpZXIpO1xyXG59KTtcclxuXHJcbi8vIEBkZXNjICAgIENyZWF0ZSBhIG5ldyBzdXBwbGllclxyXG4vLyBAcm91dGUgICBQT1NUIC9hcGkvc3VwcGxpZXJzXHJcbi8vIEBhY2Nlc3MgIFByaXZhdGUvQWRtaW5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVN1cHBsaWVyID0gYXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgcGhvbmUgfSA9IHJlcS5ib2R5O1xyXG4gIGxldCB7IGNvZGUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAvLyBLaeG7g20gdHJhIHRow7RuZyB0aW4gYuG6r3QgYnXhu5ljXHJcbiAgaWYgKCFuYW1lIHx8ICFwaG9uZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IFwiVnVpIGzDsm5nIGN1bmcgY+G6pXAgdMOqbiB2w6Agc+G7kSDEkWnhu4duIHRob+G6oWlcIixcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gTuG6v3Uga2jDtG5nIGPDsyBtw6MsIHThu7EgxJHhu5luZyB04bqhbyBtw6Mgbmfhuqt1IG5oacOqbiA2IGNo4buvIHPhu5FcclxuICBpZiAoIWNvZGUpIHtcclxuICAgIGNvZGUgPSBNYXRoLmZsb29yKDEwMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgICByZXEuYm9keS5jb2RlID0gY29kZTtcclxuICB9XHJcblxyXG4gIC8vIEtp4buDbSB0cmEgeGVtIGNvZGUgxJHDoyB04buTbiB04bqhaSBjaMawYVxyXG4gIGNvbnN0IGV4aXN0aW5nU3VwcGxpZXIgPSBhd2FpdCBTdXBwbGllci5maW5kT25lKHsgY29kZSB9KTtcclxuICBpZiAoZXhpc3RpbmdTdXBwbGllcikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IFwiTcOjIG5ow6AgY3VuZyBj4bqlcCDEkcOjIHThu5NuIHThuqFpXCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFRow6ptIHRow7RuZyB0aW4gbmfGsOG7nWkgdOG6oW8gbuG6v3UgY8OzXHJcbiAgaWYgKHJlcS51c2VyICYmIHJlcS51c2VyLl9pZCkge1xyXG4gICAgcmVxLmJvZHkuY3JlYXRlZEJ5ID0gcmVxLnVzZXIuX2lkO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc3VwcGxpZXIgPSBhd2FpdCBTdXBwbGllci5jcmVhdGUocmVxLmJvZHkpO1xyXG5cclxuICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgc3VjY2VzczogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6IFwiVGjDqm0gbmjDoCBjdW5nIGPhuqVwIHRow6BuaCBjw7RuZ1wiLFxyXG4gICAgc3VwcGxpZXIsXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gQGRlc2MgICAgVXBkYXRlIGEgc3VwcGxpZXJcclxuLy8gQHJvdXRlICAgUFVUIC9hcGkvc3VwcGxpZXJzLzppZFxyXG4vLyBAYWNjZXNzICBQcml2YXRlL0FkbWluXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVTdXBwbGllciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBsZXQgc3VwcGxpZXIgPSBhd2FpdCBTdXBwbGllci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuXHJcbiAgaWYgKCFzdXBwbGllcikge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IFwiS2jDtG5nIHTDrG0gdGjhuqV5IG5ow6AgY3VuZyBj4bqlcFwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBLaeG7g20gdHJhIHRow7RuZyB0aW4gYuG6r3QgYnXhu5ljXHJcbiAgaWYgKCFyZXEuYm9keS5uYW1lIHx8ICFyZXEuYm9keS5waG9uZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IFwiVnVpIGzDsm5nIGN1bmcgY+G6pXAgdMOqbiB2w6Agc+G7kSDEkWnhu4duIHRob+G6oWlcIixcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gTuG6v3Uga2jDtG5nIGPDsyBtw6MsIHThu7EgxJHhu5luZyB04bqhbyBtw6Mgbmfhuqt1IG5oacOqbiA2IGNo4buvIHPhu5FcclxuICBpZiAoIXJlcS5ib2R5LmNvZGUpIHtcclxuICAgIHJlcS5ib2R5LmNvZGUgPSBNYXRoLmZsb29yKDEwMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMDApLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG5cclxuICAvLyBO4bq/dSBj4bqtcCBuaOG6rXQgbcOjIG5ow6AgY3VuZyBj4bqlcCAoY29kZSksIHBo4bqjaSBraeG7g20gdHJhIHhlbSBtw6MgxJHDoyB04buTbiB04bqhaSBjaMawYVxyXG4gIGlmIChyZXEuYm9keS5jb2RlICYmIHJlcS5ib2R5LmNvZGUgIT09IHN1cHBsaWVyLmNvZGUpIHtcclxuICAgIGNvbnN0IGV4aXN0aW5nU3VwcGxpZXIgPSBhd2FpdCBTdXBwbGllci5maW5kT25lKHtcclxuICAgICAgY29kZTogcmVxLmJvZHkuY29kZSxcclxuICAgICAgX2lkOiB7ICRuZTogcmVxLnBhcmFtcy5pZCB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nU3VwcGxpZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBcIk3DoyBuaMOgIGN1bmcgY+G6pXAgxJHDoyB04buTbiB04bqhaVwiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFRow6ptIHRow7RuZyB0aW4gbmfGsOG7nWkgY+G6rXAgbmjhuq10IG7hur91IGPDs1xyXG4gIGlmIChyZXEudXNlciAmJiByZXEudXNlci5faWQpIHtcclxuICAgIHJlcS5ib2R5LnVwZGF0ZWRCeSA9IHJlcS51c2VyLl9pZDtcclxuICB9XHJcblxyXG4gIHN1cHBsaWVyID0gYXdhaXQgU3VwcGxpZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgcmVxLmJvZHksIHtcclxuICAgIG5ldzogdHJ1ZSxcclxuICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgbWVzc2FnZTogXCJD4bqtcCBuaOG6rXQgbmjDoCBjdW5nIGPhuqVwIHRow6BuaCBjw7RuZ1wiLFxyXG4gICAgc3VwcGxpZXIsXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gQGRlc2MgICAgRGVsZXRlIGEgc3VwcGxpZXJcclxuLy8gQHJvdXRlICAgREVMRVRFIC9hcGkvc3VwcGxpZXJzLzppZFxyXG4vLyBAYWNjZXNzICBQcml2YXRlL0FkbWluXHJcbmV4cG9ydCBjb25zdCBkZWxldGVTdXBwbGllciA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBzdXBwbGllciA9IGF3YWl0IFN1cHBsaWVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG5cclxuICBpZiAoIXN1cHBsaWVyKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogXCJLaMO0bmcgdMOsbSB0aOG6pXkgbmjDoCBjdW5nIGPhuqVwXCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGF3YWl0IHN1cHBsaWVyLmRlbGV0ZU9uZSgpO1xyXG5cclxuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgc3VjY2VzczogdHJ1ZSxcclxuICAgIG1lc3NhZ2U6IFwiWMOzYSBuaMOgIGN1bmcgY+G6pXAgdGjDoG5oIGPDtG5nXCIsXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gQGRlc2MgICAgU2VhcmNoIHN1cHBsaWVyc1xyXG4vLyBAcm91dGUgICBHRVQgL2FwaS9zdXBwbGllcnMvc2VhcmNoXHJcbi8vIEBhY2Nlc3MgIFByaXZhdGUvQWRtaW5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaFN1cHBsaWVycyA9IGFzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHF1ZXJ5ID0gXCJcIiB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICBjb25zdCBzZWFyY2hDb25kaXRpb24gPSB7XHJcbiAgICAkb3I6IFtcclxuICAgICAgeyBuYW1lOiB7ICRyZWdleDogcXVlcnksICRvcHRpb25zOiBcImlcIiB9IH0sXHJcbiAgICAgIHsgY29kZTogeyAkcmVnZXg6IHF1ZXJ5LCAkb3B0aW9uczogXCJpXCIgfSB9LFxyXG4gICAgICB7IGNvbnRhY3RQZXJzb246IHsgJHJlZ2V4OiBxdWVyeSwgJG9wdGlvbnM6IFwiaVwiIH0gfSxcclxuICAgICAgeyBwaG9uZTogeyAkcmVnZXg6IHF1ZXJ5LCAkb3B0aW9uczogXCJpXCIgfSB9LFxyXG4gICAgICB7IGVtYWlsOiB7ICRyZWdleDogcXVlcnksICRvcHRpb25zOiBcImlcIiB9IH0sXHJcbiAgICBdLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHN1cHBsaWVycyA9IGF3YWl0IFN1cHBsaWVyLmZpbmQoc2VhcmNoQ29uZGl0aW9uKS5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KTtcclxuXHJcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHN1cHBsaWVycyk7XHJcbn0pOyAiXSwibWFwcGluZ3MiOiIyT0FBQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFELE9BQUEsa0NBQTZELFNBQUFELHVCQUFBRyxDQUFBLFVBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBOztBQUU3RDtBQUNBO0FBQ0E7QUFDTyxNQUFNRyxlQUFlLEdBQUFDLE9BQUEsQ0FBQUQsZUFBQSxHQUFHLElBQUFFLDBCQUFZLEVBQUMsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDOUQsTUFBTUMsU0FBUyxHQUFHLE1BQU1DLGlCQUFRLENBQUNDLElB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