"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.sendMessage = exports.markAllAsRead = exports.getUnreadCount = exports.getMessagesByUserId = exports.getAllContacts = void 0;var _Message = _interopRequireDefault(require("../Model/Message.js"));
var _Register = _interopRequireDefault(require("../Model/Register.js"));
var _Admin = _interopRequireDefault(require("../Model/Admin.js"));
var _admin = require("../config/admin.js");
var _dotenv = _interopRequireDefault(require("dotenv"));
var _notificationService = require("../Services/notificationService.js");function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

// Cấu hình dotenv
_dotenv.default.config();

// Mã token admin cố định
const ADMIN_SECRET_TOKEN = "admin-token-for-TKhiem";

// Hàm lấy tất cả người dùng đã nhắn tin với admin
const getAllContacts = async (req, res) => {
  try {
    // Lấy danh sách các cuộc hội thoại
    const conversations = await _Message.default.find().sort({ lastUpdated: -1 });

    // Lấy thông tin chi tiết về người dùng
    const userIds = conversations.map((conv) => conv.userId);
    const users = await _Register.default.find({ _id: { $in: userIds } });

    // Lấy thông tin admin nếu có adminId
    const adminIds = conversations.
    map((conv) => conv.adminId).
    filter((id) => id !== null);
    const admins = await _Admin.default.find({ _id: { $in: adminIds } });

    // Map thông tin người dùng vào kết quả
    const contacts = conversations.map((conv) => {
      const user = users.find((u) => u._id.toString() === conv.userId.toString());
      const admin = admins.find((a) => a && conv.adminId && a._id.toString() === conv.adminId.toString());
      const lastMessage = conv.messages.length > 0 ? conv.messages[conv.messages.length - 1] : null;

      return {
        id: user && user._id ? user._id.toString() : conv.userId.toString(),
        name: user && user.firstName ? `${user.firstName} ${user.lastName}` : 'Người dùng',
        avatar: user && user.userImage ? user.userImage : null,
        online: false, // Có thể triển khai sau với Socket.io
        lastSeen: lastMessage ? formatTimeAgo(lastMessage.timestamp) : null,
        lastMessage: lastMessage ? lastMessage.text : '',
        unread: conv.messages.filter((msg) => msg.sender === 'user' && !msg.read).length,
        adminName: admin && admin.fullName ? admin.fullName : 'Admin',
        adminId: conv.adminId ? conv.adminId.toString() : undefined
      };
    });

    return res.status(200).json(contacts);
  } catch (error) {
    console.error("Lỗi khi lấy danh sách liên hệ:", error);
    return res.status(500).json({ message: "Lỗi server: " + error.message });
  }
};

// Hàm lấy tin nhắn giữa admin và một user cụ thể
exports.getAllContacts = getAllContacts;const getMessagesByUserId = async (req, res) => {
  try {
    const { userId } = req.params;

    // Kiểm tra xem người dùng có phải là admin không
    const isAdmin = req.headers['admin-token'] === ADMIN_SECRET_TOKEN ||
    req.user && req.user.role === 'admin';

    // Nếu userId là "admin", thay thế bằng ID admin thực
    let actualUserId = userId;
    if (userId === "admin") {
      actualUserId = await (0, _admin.getAdminId)();
    }

    // Tìm cuộc hội thoại với userId
    let conversation;
    if (isAdmin) {
      // Admin đang xem tin nhắn của một user
      conversation = await _Message.default.findOne({ userId: actualUserId });
    } else {
      // Người dùng đang xem tin nhắn của họ với admin
      const currentUserId = req.user ? req.user.id : actualUserId;
      conversation = await _Message.default.findOne({ userId: currentUserId });
    }

    if (!conversation) {
      // Nếu không tìm thấy, trả về mảng rỗng
      return res.status(200).json([]);
    }

    // Format lại tin nhắn cho client
    const formattedMessages = conversation.messages.map((msg) => ({
      id: msg._id.toString(),
      text: msg.text,
      sender: msg.sender,
      read: msg.read,
      createdAt: msg.timestamp
    }));

    return res.status(200).json(formattedMessages);
  } catch (error) {
    console.error("Lỗi khi lấy tin nhắn:", error);
    return res.status(500).json({ message: "Lỗi server: " + error.message });
  }
};

// Hàm gửi tin nhắn mới
exports.getMessagesByUserId = getMessagesByUserId;const sendMessage = async (req, res) => {
  try {
    const { text, sender, receiverId, userId: requestUserId } = req.body;

    if (!text || !sender) {
      return res.status(400).json({ message: "Thiếu thông tin tin nhắn" });
    }

    // Xác định userId và adminId
    let userId, adminId;

    // Lấy adminId
    adminId = await (0, _admin.getAdminId)();

    // Xác định userId dựa vào sender
    if (sender === 'admin') {
      // Nếu admin gửi tin nhắn, receiverId chính là userId
      userId = receiverId;
    } else {
      // Nếu user gửi tin nhắn, lấy userId từ request hoặc token
      userId = requestUserId || (req.user ? req.user.id : null);
    }

    if (!userId) {
      return res.status(400).json({ message: "Không xác định được người nhận tin nhắn" });
    }

    // Tìm cuộc hội thoại hiện có
    let conversation = await _Message.default.findOne({
      userId: userId
    });

    if (!conversation) {
      // Tạo mới cuộc hội thoại nếu chưa tồn tại
      conversation = new _Message.default({
        userId,
        adminId,
        messages: [],
        unreadCount: 0
      });
    }

    // Thêm tin nhắn mới vào mảng
    const newMessage = {
      text,
      sender,
      read: false,
      timestamp: new Date()
    };

    conversation.messages.push(newMessage);

    // Cập nhật số lượng tin nhắn chưa đọc
    if (sender === 'user') {
      conversation.unreadCount = (conversation.unreadCount || 0) + 1;
    }

    // Lưu cuộc hội thoại
    await conversation.save();

    // Lấy tin nhắn vừa thêm vào
    const addedMessage = conversation.messages[conversation.messages.length - 1];

    // Gửi thông báo nếu tin nhắn từ admin gửi cho user
    if (sender === 'admin' && userId) {
      try {
        // Lấy thông tin người gửi (admin)
        const admin = await _Admin.default.findById(adminId);
        const senderName = admin ? admin.fullName || "Admin" : "Admin";

        // Lấy thông tin user để kiểm tra
        const user = await _Register.default.findById(userId);
        console.log(`Kiểm tra user trước khi gửi thông báo:`, {
          userId,
          hasSubscriptions: user && user.pushSubscriptions ? user.pushSubscriptions.length > 0 : false,
          subscriptionsCount: user && user.pushSubscriptions ? user.pushSubscriptions.length : 0
        });

        // Gửi thông báo đến người dùng
        console.log(`Chuẩn bị gửi thông báo với các tham số:`, {
          userId,
          senderName,
          textPreview: text.substring(0, 20) + (text.length > 20 ? '...' : '')
        });

        const notificationResult = await (0, _notificationService.sendMessageNotification)(userId, senderName, text).
        catch((error) => {
          console.error('Error sending message notification:', error);
          return false;
        });

        console.log(`Kết quả gửi thông báo:`, notificationResult ? 'Thành công' : 'Thất bại');
      } catch (notificationError) {
        console.error('Lỗi khi gửi thông báo tin nhắn mới:', notificationError);
        // Không ảnh hưởng đến việc trả về response
      }
    }

    // Trả về thông tin tin nhắn đã gửi
    return res.status(201).json({
      id: addedMessage._id.toString(),
      text: addedMessage.text,
      sender: addedMessage.sender,
      read: addedMessage.read,
      createdAt: addedMessage.timestamp
    });
  } catch (error) {
    console.error("Lỗi khi gửi tin nhắn:", error);
    return res.status(500).json({ message: "Lỗi server: " + error.message });
  }
};

// Hàm đánh dấu tất cả tin nhắn là đã đọc
exports.sendMessage = sendMessage;const markAllAsRead = async (req, res) => {
  try {
    const { userId } = req.params;

    // Tìm cuộc hội thoại
    const conversation = await _Message.default.findOne({ userId });

    if (!conversation) {
      return res.status(404).json({ message: "Không tìm thấy cuộc hội thoại" });
    }

    // Cập nhật trạng thái đã đọc cho tất cả tin nhắn từ admin
    let updated = false;

    conversation.messages = conversation.messages.map((msg) => {
      if (msg.sender === 'admin' && !msg.read) {
        updated = true;
        return { ...msg.toObject(), read: true };
      }
      return msg;
    });

    // Reset số lượng tin nhắn chưa đọc
    if (updated) {
      conversation.unreadCount = 0;
      await conversation.save();
    }

    return res.status(200).json({ success: true });
  } catch (error) {
    console.error("Lỗi khi đánh dấu tin nhắn đã đọc:", error);
    return res.status(500).json({ message: "Lỗi server: " + error.message });
  }
};

// Hàm lấy số lượng tin nhắn chưa đọc cho admin
exports.markAllAsRead = markAllAsRead;const getUnreadCount = async (req, res) => {
  try {
    // Kiểm tra admin token
    const isAdmin = req.headers['admin-token'] === ADMIN_SECRET_TOKEN;
    if (!isAdmin) {
      return res.status(403).json({ message: "Không có quyền truy cập" });
    }

    // Tính tổng số tin nhắn chưa đọc từ tất cả cuộc hội thoại
    const conversations = await _Message.default.find();
    const totalUnread = conversations.reduce((sum, conv) => sum + (conv.unreadCount || 0), 0);

    return res.status(200).json({ count: totalUnread });
  } catch (error) {
    console.error("Lỗi khi lấy số lượng tin nhắn chưa đọc:", error);
    return res.status(500).json({ message: "Lỗi server: " + error.message });
  }
};

// Hàm format thời gian
exports.getUnreadCount = getUnreadCount;function formatTimeAgo(date) {
  const now = new Date();
  const diff = Math.floor((now - date) / 1000); // Độ chênh lệch tính bằng giây

  if (diff < 60) return "Vừa xong";
  if (diff < 3600) return `${Math.floor(diff / 60)} phút trước`;
  if (diff < 86400) return `${Math.floor(diff / 3600)} giờ trước`;

  return new Date(date).toLocaleDateString('vi-VN');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTWVzc2FnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX1JlZ2lzdGVyIiwiX0FkbWluIiwiX2FkbWluIiwiX2RvdGVudiIsIl9ub3RpZmljYXRpb25TZXJ2aWNlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZG90ZW52IiwiY29uZmlnIiwiQURNSU5fU0VDUkVUX1RPS0VOIiwiZ2V0QWxsQ29udGFjdHMiLCJyZXEiLCJyZXMiLCJjb252ZXJzYXRpb25zIiwiQ29udmVyc2F0aW9uIiwiZmluZCIsInNvcnQiLCJsYXN0VXBkYXRlZCIsInVzZXJJZHMiLCJtYXAiLCJjb252IiwidXNlcklkIiwidXNlcnMiLCJVc2VyIiwiX2lkIiwiJGluIiwiYWRtaW5JZHMiLCJhZG1pbklkIiwiZmlsdGVyIiwiaWQiLCJhZG1pbnMiLCJBZG1pbiIsImNvbnRhY3RzIiwidXNlciIsInUiLCJ0b1N0cmluZyIsImFkbWluIiwiYSIsImxhc3RNZXNzYWdlIiwibWVzc2FnZXMiLCJsZW5ndGgiLCJuYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhdmF0YXIiLCJ1c2VySW1hZ2UiLCJvbmxpbmUiLCJsYXN0U2VlbiIsImZvcm1hdFRpbWVBZ28iLCJ0aW1lc3RhbXAiLCJ0ZXh0IiwidW5yZWFkIiwibXNnIiwic2VuZGVyIiwicmVhZCIsImFkbWluTmFtZSIsImZ1bGxOYW1lIiwidW5kZWZpbmVkIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJleHBvcnRzIiwiZ2V0TWVzc2FnZXNCeVVzZXJJZCIsInBhcmFtcyIsImlzQWRtaW4iLCJoZWFkZXJzIiwicm9sZSIsImFjdHVhbFVzZXJJZCIsImdldEFkbWluSWQiLCJjb252ZXJzYXRpb24iLCJmaW5kT25lIiwiY3VycmVudFVzZXJJZCIsImZvcm1hdHRlZE1lc3NhZ2VzIiwiY3JlYXRlZEF0Iiwic2VuZE1lc3NhZ2UiLCJyZWNlaXZlcklkIiwicmVxdWVzdFVzZXJJZCIsImJvZHkiLCJ1bnJlYWRDb3VudCIsIm5ld01lc3NhZ2UiLCJEYXRlIiwicHVzaCIsInNhdmUiLCJhZGRlZE1lc3NhZ2UiLCJmaW5kQnlJZCIsInNlbmRlck5hbWUiLCJsb2ciLCJoYXNTdWJzY3JpcHRpb25zIiwicHVzaFN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpcHRpb25zQ291bnQiLCJ0ZXh0UHJldmlldyIsInN1YnN0cmluZyIsIm5vdGlmaWNhdGlvblJlc3VsdCIsInNlbmRNZXNzYWdlTm90aWZpY2F0aW9uIiwiY2F0Y2giLCJub3RpZmljYXRpb25FcnJvciIsIm1hcmtBbGxBc1JlYWQiLCJ1cGRhdGVkIiwidG9PYmplY3QiLCJzdWNjZXNzIiwiZ2V0VW5yZWFkQ291bnQiLCJ0b3RhbFVucmVhZCIsInJlZHVjZSIsInN1bSIsImNvdW50IiwiZGF0ZSIsIm5vdyIsImRpZmYiLCJNYXRoIiwiZmxvb3IiLCJ0b0xvY2FsZURhdGVTdHJpbmciXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvQ29udHJvbGxlci9tZXNzYWdlQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29udmVyc2F0aW9uIGZyb20gXCIuLi9Nb2RlbC9NZXNzYWdlLmpzXCI7XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vTW9kZWwvUmVnaXN0ZXIuanNcIjtcbmltcG9ydCBBZG1pbiBmcm9tIFwiLi4vTW9kZWwvQWRtaW4uanNcIjtcbmltcG9ydCB7IGdldEFkbWluSWQgfSBmcm9tIFwiLi4vY29uZmlnL2FkbWluLmpzXCI7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgeyBzZW5kTWVzc2FnZU5vdGlmaWNhdGlvbiB9IGZyb20gJy4uL1NlcnZpY2VzL25vdGlmaWNhdGlvblNlcnZpY2UuanMnO1xuXG4vLyBD4bqldSBow6xuaCBkb3RlbnZcbmRvdGVudi5jb25maWcoKTtcblxuLy8gTcOjIHRva2VuIGFkbWluIGPhu5EgxJHhu4tuaFxuY29uc3QgQURNSU5fU0VDUkVUX1RPS0VOID0gXCJhZG1pbi10b2tlbi1mb3ItVEtoaWVtXCI7XG5cbi8vIEjDoG0gbOG6pXkgdOG6pXQgY+G6oyBuZ8aw4budaSBkw7luZyDEkcOjIG5o4bqvbiB0aW4gduG7m2kgYWRtaW5cbmV4cG9ydCBjb25zdCBnZXRBbGxDb250YWN0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIC8vIEzhuqV5IGRhbmggc8OhY2ggY8OhYyBjdeG7mWMgaOG7mWkgdGhv4bqhaVxuICAgIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSBhd2FpdCBDb252ZXJzYXRpb24uZmluZCgpLnNvcnQoeyBsYXN0VXBkYXRlZDogLTEgfSk7XG4gICAgXG4gICAgLy8gTOG6pXkgdGjDtG5nIHRpbiBjaGkgdGnhur90IHbhu4EgbmfGsOG7nWkgZMO5bmdcbiAgICBjb25zdCB1c2VySWRzID0gY29udmVyc2F0aW9ucy5tYXAoY29udiA9PiBjb252LnVzZXJJZCk7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoeyBfaWQ6IHsgJGluOiB1c2VySWRzIH0gfSk7XG4gICAgXG4gICAgLy8gTOG6pXkgdGjDtG5nIHRpbiBhZG1pbiBu4bq/dSBjw7MgYWRtaW5JZFxuICAgIGNvbnN0IGFkbWluSWRzID0gY29udmVyc2F0aW9uc1xuICAgICAgLm1hcChjb252ID0+IGNvbnYuYWRtaW5JZClcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IG51bGwpO1xuICAgIGNvbnN0IGFkbWlucyA9IGF3YWl0IEFkbWluLmZpbmQoeyBfaWQ6IHsgJGluOiBhZG1pbklkcyB9IH0pO1xuICAgIFxuICAgIC8vIE1hcCB0aMO0bmcgdGluIG5nxrDhu51pIGTDuW5nIHbDoG8ga+G6v3QgcXXhuqNcbiAgICBjb25zdCBjb250YWN0cyA9IGNvbnZlcnNhdGlvbnMubWFwKGNvbnYgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQodSA9PiB1Ll9pZC50b1N0cmluZygpID09PSBjb252LnVzZXJJZC50b1N0cmluZygpKTtcbiAgICAgIGNvbnN0IGFkbWluID0gYWRtaW5zLmZpbmQoYSA9PiBhICYmIGNvbnYuYWRtaW5JZCAmJiBhLl9pZC50b1N0cmluZygpID09PSBjb252LmFkbWluSWQudG9TdHJpbmcoKSk7XG4gICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IGNvbnYubWVzc2FnZXMubGVuZ3RoID4gMCA/IGNvbnYubWVzc2FnZXNbY29udi5tZXNzYWdlcy5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiB1c2VyICYmIHVzZXIuX2lkID8gdXNlci5faWQudG9TdHJpbmcoKSA6IGNvbnYudXNlcklkLnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHVzZXIgJiYgdXNlci5maXJzdE5hbWUgPyBgJHt1c2VyLmZpcnN0TmFtZX0gJHt1c2VyLmxhc3ROYW1lfWAgOiAnTmfGsOG7nWkgZMO5bmcnLFxuICAgICAgICBhdmF0YXI6IHVzZXIgJiYgdXNlci51c2VySW1hZ2UgPyB1c2VyLnVzZXJJbWFnZSA6IG51bGwsXG4gICAgICAgIG9ubGluZTogZmFsc2UsIC8vIEPDsyB0aOG7gyB0cmnhu4NuIGtoYWkgc2F1IHbhu5tpIFNvY2tldC5pb1xuICAgICAgICBsYXN0U2VlbjogbGFzdE1lc3NhZ2UgPyBmb3JtYXRUaW1lQWdvKGxhc3RNZXNzYWdlLnRpbWVzdGFtcCkgOiBudWxsLFxuICAgICAgICBsYXN0TWVzc2FnZTogbGFzdE1lc3NhZ2UgPyBsYXN0TWVzc2FnZS50ZXh0IDogJycsXG4gICAgICAgIHVucmVhZDogY29udi5tZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5zZW5kZXIgPT09ICd1c2VyJyAmJiAhbXNnLnJlYWQpLmxlbmd0aCxcbiAgICAgICAgYWRtaW5OYW1lOiBhZG1pbiAmJiBhZG1pbi5mdWxsTmFtZSA/IGFkbWluLmZ1bGxOYW1lIDogJ0FkbWluJyxcbiAgICAgICAgYWRtaW5JZDogY29udi5hZG1pbklkID8gY29udi5hZG1pbklkLnRvU3RyaW5nKCkgOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNvbnRhY3RzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTOG7l2kga2hpIGzhuqV5IGRhbmggc8OhY2ggbGnDqm4gaOG7hzpcIiwgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiTOG7l2kgc2VydmVyOiBcIiArIGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbn07XG5cbi8vIEjDoG0gbOG6pXkgdGluIG5o4bqvbiBnaeG7r2EgYWRtaW4gdsOgIG3hu5l0IHVzZXIgY+G7pSB0aOG7g1xuZXhwb3J0IGNvbnN0IGdldE1lc3NhZ2VzQnlVc2VySWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBcbiAgICAvLyBLaeG7g20gdHJhIHhlbSBuZ8aw4budaSBkw7luZyBjw7MgcGjhuqNpIGzDoCBhZG1pbiBraMO0bmdcbiAgICBjb25zdCBpc0FkbWluID0gcmVxLmhlYWRlcnNbJ2FkbWluLXRva2VuJ10gPT09IEFETUlOX1NFQ1JFVF9UT0tFTiBcbiAgICAgIHx8IChyZXEudXNlciAmJiByZXEudXNlci5yb2xlID09PSAnYWRtaW4nKTtcbiAgICBcbiAgICAvLyBO4bq/dSB1c2VySWQgbMOgIFwiYWRtaW5cIiwgdGhheSB0aOG6vyBi4bqxbmcgSUQgYWRtaW4gdGjhu7FjXG4gICAgbGV0IGFjdHVhbFVzZXJJZCA9IHVzZXJJZDtcbiAgICBpZiAodXNlcklkID09PSBcImFkbWluXCIpIHtcbiAgICAgIGFjdHVhbFVzZXJJZCA9IGF3YWl0IGdldEFkbWluSWQoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVMOsbSBjdeG7mWMgaOG7mWkgdGhv4bqhaSB24bubaSB1c2VySWRcbiAgICBsZXQgY29udmVyc2F0aW9uO1xuICAgIGlmIChpc0FkbWluKSB7XG4gICAgICAvLyBBZG1pbiDEkWFuZyB4ZW0gdGluIG5o4bqvbiBj4bunYSBt4buZdCB1c2VyXG4gICAgICBjb252ZXJzYXRpb24gPSBhd2FpdCBDb252ZXJzYXRpb24uZmluZE9uZSh7IHVzZXJJZDogYWN0dWFsVXNlcklkIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOZ8aw4budaSBkw7luZyDEkWFuZyB4ZW0gdGluIG5o4bqvbiBj4bunYSBo4buNIHbhu5tpIGFkbWluXG4gICAgICBjb25zdCBjdXJyZW50VXNlcklkID0gcmVxLnVzZXIgPyByZXEudXNlci5pZCA6IGFjdHVhbFVzZXJJZDtcbiAgICAgIGNvbnZlcnNhdGlvbiA9IGF3YWl0IENvbnZlcnNhdGlvbi5maW5kT25lKHsgdXNlcklkOiBjdXJyZW50VXNlcklkIH0pO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWNvbnZlcnNhdGlvbikge1xuICAgICAgLy8gTuG6v3Uga2jDtG5nIHTDrG0gdGjhuqV5LCB0cuG6oyB24buBIG3huqNuZyBy4buXbmdcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihbXSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZvcm1hdCBs4bqhaSB0aW4gbmjhuq9uIGNobyBjbGllbnRcbiAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlcyA9IGNvbnZlcnNhdGlvbi5tZXNzYWdlcy5tYXAobXNnID0+ICh7XG4gICAgICBpZDogbXNnLl9pZC50b1N0cmluZygpLFxuICAgICAgdGV4dDogbXNnLnRleHQsXG4gICAgICBzZW5kZXI6IG1zZy5zZW5kZXIsXG4gICAgICByZWFkOiBtc2cucmVhZCxcbiAgICAgIGNyZWF0ZWRBdDogbXNnLnRpbWVzdGFtcFxuICAgIH0pKTtcbiAgICBcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZm9ybWF0dGVkTWVzc2FnZXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJM4buXaSBraGkgbOG6pXkgdGluIG5o4bqvbjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiTOG7l2kgc2VydmVyOiBcIiArIGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbn07XG5cbi8vIEjDoG0gZ+G7rWkgdGluIG5o4bqvbiBt4bubaVxuZXhwb3J0IGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZXh0LCBzZW5kZXIsIHJlY2VpdmVySWQsIHVzZXJJZDogcmVxdWVzdFVzZXJJZCB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgaWYgKCF0ZXh0IHx8ICFzZW5kZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiVGhp4bq/dSB0aMO0bmcgdGluIHRpbiBuaOG6r25cIiB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gWMOhYyDEkeG7i25oIHVzZXJJZCB2w6AgYWRtaW5JZFxuICAgIGxldCB1c2VySWQsIGFkbWluSWQ7XG4gICAgXG4gICAgLy8gTOG6pXkgYWRtaW5JZFxuICAgIGFkbWluSWQgPSBhd2FpdCBnZXRBZG1pbklkKCk7XG4gICAgXG4gICAgLy8gWMOhYyDEkeG7i25oIHVzZXJJZCBk4buxYSB2w6BvIHNlbmRlclxuICAgIGlmIChzZW5kZXIgPT09ICdhZG1pbicpIHtcbiAgICAgIC8vIE7hur91IGFkbWluIGfhu61pIHRpbiBuaOG6r24sIHJlY2VpdmVySWQgY2jDrW5oIGzDoCB1c2VySWRcbiAgICAgIHVzZXJJZCA9IHJlY2VpdmVySWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE7hur91IHVzZXIgZ+G7rWkgdGluIG5o4bqvbiwgbOG6pXkgdXNlcklkIHThu6sgcmVxdWVzdCBob+G6t2MgdG9rZW5cbiAgICAgIHVzZXJJZCA9IHJlcXVlc3RVc2VySWQgfHwgKHJlcS51c2VyID8gcmVxLnVzZXIuaWQgOiBudWxsKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiS2jDtG5nIHjDoWMgxJHhu4tuaCDEkcaw4bujYyBuZ8aw4budaSBuaOG6rW4gdGluIG5o4bqvblwiIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBUw6xtIGN14buZYyBo4buZaSB0aG/huqFpIGhp4buHbiBjw7NcbiAgICBsZXQgY29udmVyc2F0aW9uID0gYXdhaXQgQ29udmVyc2F0aW9uLmZpbmRPbmUoeyBcbiAgICAgIHVzZXJJZDogdXNlcklkIFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghY29udmVyc2F0aW9uKSB7XG4gICAgICAvLyBU4bqhbyBt4bubaSBjdeG7mWMgaOG7mWkgdGhv4bqhaSBu4bq/dSBjaMawYSB04buTbiB04bqhaVxuICAgICAgY29udmVyc2F0aW9uID0gbmV3IENvbnZlcnNhdGlvbih7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgYWRtaW5JZCxcbiAgICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgICB1bnJlYWRDb3VudDogMFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFRow6ptIHRpbiBuaOG6r24gbeG7m2kgdsOgbyBt4bqjbmdcbiAgICBjb25zdCBuZXdNZXNzYWdlID0ge1xuICAgICAgdGV4dCxcbiAgICAgIHNlbmRlcixcbiAgICAgIHJlYWQ6IGZhbHNlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgfTtcbiAgICBcbiAgICBjb252ZXJzYXRpb24ubWVzc2FnZXMucHVzaChuZXdNZXNzYWdlKTtcbiAgICBcbiAgICAvLyBD4bqtcCBuaOG6rXQgc+G7kSBsxrDhu6NuZyB0aW4gbmjhuq9uIGNoxrBhIMSR4buNY1xuICAgIGlmIChzZW5kZXIgPT09ICd1c2VyJykge1xuICAgICAgY29udmVyc2F0aW9uLnVucmVhZENvdW50ID0gKGNvbnZlcnNhdGlvbi51bnJlYWRDb3VudCB8fCAwKSArIDE7XG4gICAgfVxuICAgIFxuICAgIC8vIEzGsHUgY3Xhu5ljIGjhu5lpIHRob+G6oWlcbiAgICBhd2FpdCBjb252ZXJzYXRpb24uc2F2ZSgpO1xuICAgIFxuICAgIC8vIEzhuqV5IHRpbiBuaOG6r24gduG7q2EgdGjDqm0gdsOgb1xuICAgIGNvbnN0IGFkZGVkTWVzc2FnZSA9IGNvbnZlcnNhdGlvbi5tZXNzYWdlc1tjb252ZXJzYXRpb24ubWVzc2FnZXMubGVuZ3RoIC0gMV07XG4gICAgXG4gICAgLy8gR+G7rWkgdGjDtG5nIGLDoW8gbuG6v3UgdGluIG5o4bqvbiB04burIGFkbWluIGfhu61pIGNobyB1c2VyXG4gICAgaWYgKHNlbmRlciA9PT0gJ2FkbWluJyAmJiB1c2VySWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEzhuqV5IHRow7RuZyB0aW4gbmfGsOG7nWkgZ+G7rWkgKGFkbWluKVxuICAgICAgICBjb25zdCBhZG1pbiA9IGF3YWl0IEFkbWluLmZpbmRCeUlkKGFkbWluSWQpO1xuICAgICAgICBjb25zdCBzZW5kZXJOYW1lID0gYWRtaW4gPyBhZG1pbi5mdWxsTmFtZSB8fCBcIkFkbWluXCIgOiBcIkFkbWluXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBM4bqleSB0aMO0bmcgdGluIHVzZXIgxJHhu4Mga2nhu4NtIHRyYVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhgS2nhu4NtIHRyYSB1c2VyIHRyxrDhu5tjIGtoaSBn4butaSB0aMO0bmcgYsOhbzpgLCB7XG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIGhhc1N1YnNjcmlwdGlvbnM6IHVzZXIgJiYgdXNlci5wdXNoU3Vic2NyaXB0aW9ucyA/IHVzZXIucHVzaFN1YnNjcmlwdGlvbnMubGVuZ3RoID4gMCA6IGZhbHNlLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbnNDb3VudDogdXNlciAmJiB1c2VyLnB1c2hTdWJzY3JpcHRpb25zID8gdXNlci5wdXNoU3Vic2NyaXB0aW9ucy5sZW5ndGggOiAwLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEfhu61pIHRow7RuZyBiw6FvIMSR4bq/biBuZ8aw4budaSBkw7luZ1xuICAgICAgICBjb25zb2xlLmxvZyhgQ2h14bqpbiBi4buLIGfhu61pIHRow7RuZyBiw6FvIHbhu5tpIGPDoWMgdGhhbSBz4buROmAsIHtcbiAgICAgICAgICB1c2VySWQsIFxuICAgICAgICAgIHNlbmRlck5hbWUsIFxuICAgICAgICAgIHRleHRQcmV2aWV3OiB0ZXh0LnN1YnN0cmluZygwLCAyMCkgKyAodGV4dC5sZW5ndGggPiAyMCA/ICcuLi4nIDogJycpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uUmVzdWx0ID0gYXdhaXQgc2VuZE1lc3NhZ2VOb3RpZmljYXRpb24odXNlcklkLCBzZW5kZXJOYW1lLCB0ZXh0KVxuICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2Ugbm90aWZpY2F0aW9uOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBL4bq/dCBxdeG6oyBn4butaSB0aMO0bmcgYsOhbzpgLCBub3RpZmljYXRpb25SZXN1bHQgPyAnVGjDoG5oIGPDtG5nJyA6ICdUaOG6pXQgYuG6oWknKTtcbiAgICAgIH0gY2F0Y2ggKG5vdGlmaWNhdGlvbkVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0zhu5dpIGtoaSBn4butaSB0aMO0bmcgYsOhbyB0aW4gbmjhuq9uIG3hu5tpOicsIG5vdGlmaWNhdGlvbkVycm9yKTtcbiAgICAgICAgLy8gS2jDtG5nIOG6o25oIGjGsOG7n25nIMSR4bq/biB2aeG7h2MgdHLhuqMgduG7gSByZXNwb25zZVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBUcuG6oyB24buBIHRow7RuZyB0aW4gdGluIG5o4bqvbiDEkcOjIGfhu61pXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIGlkOiBhZGRlZE1lc3NhZ2UuX2lkLnRvU3RyaW5nKCksXG4gICAgICB0ZXh0OiBhZGRlZE1lc3NhZ2UudGV4dCxcbiAgICAgIHNlbmRlcjogYWRkZWRNZXNzYWdlLnNlbmRlcixcbiAgICAgIHJlYWQ6IGFkZGVkTWVzc2FnZS5yZWFkLFxuICAgICAgY3JlYXRlZEF0OiBhZGRlZE1lc3NhZ2UudGltZXN0YW1wXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkzhu5dpIGtoaSBn4butaSB0aW4gbmjhuq9uOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJM4buXaSBzZXJ2ZXI6IFwiICsgZXJyb3IubWVzc2FnZSB9KTtcbiAgfVxufTtcblxuLy8gSMOgbSDEkcOhbmggZOG6pXUgdOG6pXQgY+G6oyB0aW4gbmjhuq9uIGzDoCDEkcOjIMSR4buNY1xuZXhwb3J0IGNvbnN0IG1hcmtBbGxBc1JlYWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICBcbiAgICAvLyBUw6xtIGN14buZYyBo4buZaSB0aG/huqFpXG4gICAgY29uc3QgY29udmVyc2F0aW9uID0gYXdhaXQgQ29udmVyc2F0aW9uLmZpbmRPbmUoeyB1c2VySWQgfSk7XG4gICAgXG4gICAgaWYgKCFjb252ZXJzYXRpb24pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiS2jDtG5nIHTDrG0gdGjhuqV5IGN14buZYyBo4buZaSB0aG/huqFpXCIgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEPhuq1wIG5o4bqtdCB0cuG6oW5nIHRow6FpIMSRw6MgxJHhu41jIGNobyB04bqldCBj4bqjIHRpbiBuaOG6r24gdOG7qyBhZG1pblxuICAgIGxldCB1cGRhdGVkID0gZmFsc2U7XG4gICAgXG4gICAgY29udmVyc2F0aW9uLm1lc3NhZ2VzID0gY29udmVyc2F0aW9uLm1lc3NhZ2VzLm1hcChtc2cgPT4ge1xuICAgICAgaWYgKG1zZy5zZW5kZXIgPT09ICdhZG1pbicgJiYgIW1zZy5yZWFkKSB7XG4gICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4geyAuLi5tc2cudG9PYmplY3QoKSwgcmVhZDogdHJ1ZSB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1zZztcbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZXNldCBz4buRIGzGsOG7o25nIHRpbiBuaOG6r24gY2jGsGEgxJHhu41jXG4gICAgaWYgKHVwZGF0ZWQpIHtcbiAgICAgIGNvbnZlcnNhdGlvbi51bnJlYWRDb3VudCA9IDA7XG4gICAgICBhd2FpdCBjb252ZXJzYXRpb24uc2F2ZSgpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJM4buXaSBraGkgxJHDoW5oIGThuqV1IHRpbiBuaOG6r24gxJHDoyDEkeG7jWM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkzhu5dpIHNlcnZlcjogXCIgKyBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59O1xuXG4vLyBIw6BtIGzhuqV5IHPhu5EgbMaw4bujbmcgdGluIG5o4bqvbiBjaMawYSDEkeG7jWMgY2hvIGFkbWluXG5leHBvcnQgY29uc3QgZ2V0VW5yZWFkQ291bnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBLaeG7g20gdHJhIGFkbWluIHRva2VuXG4gICAgY29uc3QgaXNBZG1pbiA9IHJlcS5oZWFkZXJzWydhZG1pbi10b2tlbiddID09PSBBRE1JTl9TRUNSRVRfVE9LRU47XG4gICAgaWYgKCFpc0FkbWluKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIktow7RuZyBjw7MgcXV54buBbiB0cnV5IGPhuq1wXCIgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFTDrW5oIHThu5VuZyBz4buRIHRpbiBuaOG6r24gY2jGsGEgxJHhu41jIHThu6sgdOG6pXQgY+G6oyBjdeG7mWMgaOG7mWkgdGhv4bqhaVxuICAgIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSBhd2FpdCBDb252ZXJzYXRpb24uZmluZCgpO1xuICAgIGNvbnN0IHRvdGFsVW5yZWFkID0gY29udmVyc2F0aW9ucy5yZWR1Y2UoKHN1bSwgY29udikgPT4gc3VtICsgKGNvbnYudW5yZWFkQ291bnQgfHwgMCksIDApO1xuICAgIFxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGNvdW50OiB0b3RhbFVucmVhZCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTOG7l2kga2hpIGzhuqV5IHPhu5EgbMaw4bujbmcgdGluIG5o4bqvbiBjaMawYSDEkeG7jWM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkzhu5dpIHNlcnZlcjogXCIgKyBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59O1xuXG4vLyBIw6BtIGZvcm1hdCB0aOG7nWkgZ2lhblxuZnVuY3Rpb24gZm9ybWF0VGltZUFnbyhkYXRlKSB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IGRpZmYgPSBNYXRoLmZsb29yKChub3cgLSBkYXRlKSAvIDEwMDApOyAvLyDEkOG7mSBjaMOqbmggbOG7h2NoIHTDrW5oIGLhurFuZyBnacOieVxuICBcbiAgaWYgKGRpZmYgPCA2MCkgcmV0dXJuIFwiVuG7q2EgeG9uZ1wiO1xuICBpZiAoZGlmZiA8IDM2MDApIHJldHVybiBgJHtNYXRoLmZsb29yKGRpZmYgLyA2MCl9IHBow7p0IHRyxrDhu5tjYDtcbiAgaWYgKGRpZmYgPCA4NjQwMCkgcmV0dXJuIGAke01hdGguZmxvb3IoZGlmZiAvIDM2MDApfSBnaeG7nSB0csaw4bubY2A7XG4gIFxuICByZXR1cm4gbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCd2aS1WTicpO1xufSAiXSwibWFwcGluZ3MiOiJnTkFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxNQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxvQkFBQSxHQUFBTCxPQUFBLHVDQUE2RSxTQUFBRCx1QkFBQU8sQ0FBQSxVQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTs7QUFFN0U7QUFDQUcsZUFBTSxDQUFDQyxNQUFNLENBQUMsQ0FBQzs7QUFFZjtBQUNBLE1BQU1DLGtCQUFrQixHQUFHLHdCQUF3Qjs7QUFFbkQ7QUFDTyxNQUFNQyxjQUFjLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDaEQsSUFBSTtJQUNGO0lBQ0EsTUFBTUMsYUFBYSxHQUFHLE1BQU1DLGdCQUFZLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxFQUFFQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQUV6RTtJQUNBLE1BQU1DLE9BQU8sR0FBR0wsYUFBYSxDQUFDTSxHQUFHLENBQUMsQ0FBQUMsSUFBSSxLQUFJQSxJQUFJLENBQUNDLE1BQU0sQ0FBQztJQUN0RCxNQUFNQyxLQUFLLEdBQUcsTUFBTUMsaUJBQUksQ0FBQ1IsSUFBSSxDQUFDLEVBQUVTLEdB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