"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.updateCategory = exports.getCategoryByName = exports.getCategoryById = exports.getAllCategories = exports.deleteCategory = exports.createCategory = void 0;var _Categories = _interopRequireDefault(require("../Model/Categories.js"));function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

const createCategory = async (req, res) => {
  const { codeCategory, nameCategory } = req.body;
  try {
    const newCategory = new _Categories.default({ codeCategory, nameCategory });
    await newCategory.save();
    res.status(201).json(newCategory);
  } catch (error) {
    if (error.code === 11000) {
      res.status(400).json({ message: "Mã danh mục đã tồn tại" });
    } else {
      res.status(500).json({ message: error.message });
    }
  }
};exports.createCategory = createCategory;

const getAllCategories = async (req, res) => {
  try {
    const categories = await _Categories.default.find();
    res.status(200).json(categories);
  } catch (error) {
    res.status(500).json({ message: error.message });
  }
};exports.getAllCategories = getAllCategories;

const updateCategory = async (req, res) => {
  const { id } = req.params;
  const { codeCategory, nameCategory } = req.body;

  try {
    const updatedCategory = await _Categories.default.findByIdAndUpdate(
      id,
      { codeCategory, nameCategory },
      { new: true, runValidators: true }
    );
    if (!updatedCategory) {
      return res.status(404).json({ message: "Không tìm thấy danh mục" });
    }
    res.status(200).json(updatedCategory);
  } catch (error) {
    res.status(500).json({ message: error.message });
  }
};exports.updateCategory = updateCategory;

const deleteCategory = async (req, res) => {
  const { id } = req.params;
  try {
    const deletedCategory = await _Categories.default.findByIdAndDelete(id);
    if (!deletedCategory) {
      return res.status(404).json({ message: "Không tìm thấy danh mục" });
    }
    res.status(200).json({ message: "Xóa danh mục thành công" });
  } catch (error) {
    res.status(500).json({ message: error.message });
  }
};exports.deleteCategory = deleteCategory;

const getCategoryById = async (req, res) => {
  const { id } = req.params;
  try {
    const category = await _Categories.default.findById(id);
    if (!category) {
      return res.status(404).json({ message: "Không tìm thấy danh mục" });
    }
    res.status(200).json(category);
  } catch (error) {
    res.status(500).json({ message: error.message });
  }
};exports.getCategoryById = getCategoryById;

const getCategoryByName = async (req, res) => {
  const { name } = req.params;
  try {
    const category = await _Categories.default.findOne({ nameCategory: name });
    if (!category) {
      return res.status(404).json({ message: "Không tìm thấy danh mục" });
    }
    res.status(200).json(category);
  } catch (error) {
    res.status(500).json({ message: error.message });
  }
};exports.getCategoryByName = getCategoryByName;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQ2F0ZWdvcmllcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY3JlYXRlQ2F0ZWdvcnkiLCJyZXEiLCJyZXMiLCJjb2RlQ2F0ZWdvcnkiLCJuYW1lQ2F0ZWdvcnkiLCJib2R5IiwibmV3Q2F0ZWdvcnkiLCJDYXRlZ29yeSIsInNhdmUiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImV4cG9ydHMiLCJnZXRBbGxDYXRlZ29yaWVzIiwiY2F0ZWdvcmllcyIsImZpbmQiLCJ1cGRhdGVDYXRlZ29yeSIsImlkIiwicGFyYW1zIiwidXBkYXRlZENhdGVnb3J5IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJuZXciLCJydW5WYWxpZGF0b3JzIiwiZGVsZXRlQ2F0ZWdvcnkiLCJkZWxldGVkQ2F0ZWdvcnkiLCJmaW5kQnlJZEFuZERlbGV0ZSIsImdldENhdGVnb3J5QnlJZCIsImNhdGVnb3J5IiwiZmluZEJ5SWQiLCJnZXRDYXRlZ29yeUJ5TmFtZSIsIm5hbWUiLCJmaW5kT25lIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL0NvbnRyb2xsZXIvY2F0ZWdvcnlDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXRlZ29yeSBmcm9tIFwiLi4vTW9kZWwvQ2F0ZWdvcmllcy5qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhdGVnb3J5ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBjb2RlQ2F0ZWdvcnksIG5hbWVDYXRlZ29yeSB9ID0gcmVxLmJvZHk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0gbmV3IENhdGVnb3J5KHsgY29kZUNhdGVnb3J5LCBuYW1lQ2F0ZWdvcnkgfSk7XHJcbiAgICBhd2FpdCBuZXdDYXRlZ29yeS5zYXZlKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbihuZXdDYXRlZ29yeSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGlmIChlcnJvci5jb2RlID09PSAxMTAwMCkge1xyXG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTcOjIGRhbmggbeG7pWMgxJHDoyB04buTbiB04bqhaVwiIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRBbGxDYXRlZ29yaWVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCBDYXRlZ29yeS5maW5kKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihjYXRlZ29yaWVzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVDYXRlZ29yeSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgY29uc3QgeyBjb2RlQ2F0ZWdvcnksIG5hbWVDYXRlZ29yeSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1cGRhdGVkQ2F0ZWdvcnkgPSBhd2FpdCBDYXRlZ29yeS5maW5kQnlJZEFuZFVwZGF0ZShcclxuICAgICAgaWQsXHJcbiAgICAgIHsgY29kZUNhdGVnb3J5LCBuYW1lQ2F0ZWdvcnkgfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHJ1blZhbGlkYXRvcnM6IHRydWUgfVxyXG4gICAgKTtcclxuICAgIGlmICghdXBkYXRlZENhdGVnb3J5KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiS2jDtG5nIHTDrG0gdGjhuqV5IGRhbmggbeG7pWNcIiB9KTtcclxuICAgIH1cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVwZGF0ZWRDYXRlZ29yeSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlQ2F0ZWdvcnkgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWxldGVkQ2F0ZWdvcnkgPSBhd2FpdCBDYXRlZ29yeS5maW5kQnlJZEFuZERlbGV0ZShpZCk7XHJcbiAgICBpZiAoIWRlbGV0ZWRDYXRlZ29yeSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIktow7RuZyB0w6xtIHRo4bqleSBkYW5oIG3hu6VjXCIgfSk7XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiWMOzYSBkYW5oIG3hu6VjIHRow6BuaCBjw7RuZ1wiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldENhdGVnb3J5QnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgQ2F0ZWdvcnkuZmluZEJ5SWQoaWQpO1xyXG4gICAgaWYgKCFjYXRlZ29yeSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIktow7RuZyB0w6xtIHRo4bqleSBkYW5oIG3hu6VjXCIgfSk7XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihjYXRlZ29yeSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0Q2F0ZWdvcnlCeU5hbWUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IG5hbWUgfSA9IHJlcS5wYXJhbXM7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgQ2F0ZWdvcnkuZmluZE9uZSh7IG5hbWVDYXRlZ29yeTogbmFtZSB9KTtcclxuICAgIGlmICghY2F0ZWdvcnkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJLaMO0bmcgdMOsbSB0aOG6pXkgZGFuaCBt4bulY1wiIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oY2F0ZWdvcnkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI4T0FBQSxJQUFBQSxXQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUEsNEJBQThDLFNBQUFELHVCQUFBRSxDQUFBLFVBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBOztBQUV2QyxNQUFNRyxjQUFjLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDaEQsTUFBTSxFQUFFQyxZQUFZLEVBQUVDLFlBQVksQ0FBQyxDQUFDLEdBQUdILEdBQUcsQ0FBQ0ksSUFBSTtFQUMvQyxJQUFJO0lBQ0YsTUFBTUMsV0FBVyxH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