"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.updateCartItem = exports.removeFromCart = exports.getCart = exports.clearCart = exports.addToCart = void 0;var _Cart = _interopRequireDefault(require("../Model/Cart.js"));
var _Products = _interopRequireDefault(require("../Model/Products.js"));function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

const getCart = async (req, res) => {
  const { userId } = req.params;

  try {
    const cart = await _Cart.default.findOne({ userId }).populate("items.productId");
    if (!cart) {
      return res.
      status(404).
      json({ message: "Giỏ hàng không tồn tại" });
    }

    cart.items.sort((a, b) => b.createdAt - a.createdAt);

    res.status(200).json({ success: true, cart });
  } catch (error) {
    console.error("Lỗi khi lấy giỏ hàng:", error);
    res.status(500).json({ success: false, message: "Lỗi server" });
  }
};exports.getCart = getCart;

const clearCart = async (req, res) => {
  const { userId } = req.body;

  try {
    const cart = await _Cart.default.findOne({ userId });

    if (!cart) {
      return res.
      status(404).
      json({ success: false, message: "Giỏ hàng không tồn tại" });
    }

    // Xóa tất cả các item trong giỏ hàng
    cart.items = [];
    await cart.save();

    res.status(200).json({
      success: true,
      message: "Đã xóa tất cả sản phẩm khỏi giỏ hàng",
      cart
    });
  } catch (error) {
    console.error("Lỗi khi xóa toàn bộ giỏ hàng:", error);
    res.status(500).json({ success: false, message: "Lỗi server" });
  }
};exports.clearCart = clearCart;

const addToCart = async (req, res) => {
  const { userId, productId, quantity } = req.body;

  try {
    let cart = await _Cart.default.findOne({ userId });

    // Lấy thông tin sản phẩm để có giá chính xác
    const product = await _Products.default.findById(productId);

    if (!product) {
      return res.status(404).json({
        success: false,
        message: "Sản phẩm không tồn tại"
      });
    }

    // Tính giá dựa trên việc có giảm giá hay không
    const price = product.productDiscount > 0 ?
    product.productPromoPrice :
    product.productPrice;

    if (!cart) {
      cart = new _Cart.default({ userId, items: [] });
    }

    const existingItem = cart.items.find(
      (item) => item.productId.toString() === productId
    );

    if (existingItem) {
      existingItem.quantity += quantity;
      existingItem.price = price; // Cập nhật giá mới nhất
      existingItem.createdAt = new Date();
    } else {
      cart.items.push({
        productId,
        quantity,
        price, // Lưu giá vào item giỏ hàng
        createdAt: new Date()
      });
    }

    await cart.save();

    res.status(200).json({
      success: true,
      message: "Sản phẩm đã được thêm vào giỏ hàng",
      cart
    });
  } catch (error) {
    console.error("Lỗi khi thêm vào giỏ hàng:", error);
    res.status(500).json({ success: false, message: "Lỗi server" });
  }
};exports.addToCart = addToCart;

const removeFromCart = async (req, res) => {
  const { userId, productId } = req.body;

  try {
    const cart = await _Cart.default.findOne({ userId });

    if (!cart) {
      return res.
      status(404).
      json({ success: false, message: "Giỏ hàng không tồn tại" });
    }

    cart.items = cart.items.filter(
      (item) => item.productId.toString() !== productId
    );

    await cart.save();

    res.status(200).json({
      success: true,
      message: "Sản phẩm đã được xóa khỏi giỏ hàng",
      cart
    });
  } catch (error) {
    console.error("Lỗi khi xóa sản phẩm khỏi giỏ hàng:", error);
    res.status(500).json({ success: false, message: "Lỗi server" });
  }
};exports.removeFromCart = removeFromCart;

const updateCartItem = async (req, res) => {
  const { userId, productId, quantity } = req.body;

  try {
    const cart = await _Cart.default.findOne({ userId });

    if (!cart) {
      return res.
      status(404).
      json({ success: false, message: "Giỏ hàng không tồn tại" });
    }

    const existingItem = cart.items.find(
      (item) => item.productId.toString() === productId
    );

    if (!existingItem) {
      return res.
      status(404).
      json({
        success: false,
        message: "Sản phẩm không tồn tại trong giỏ hàng"
      });
    }

    existingItem.quantity = quantity;
    existingItem.createdAt = new Date();

    await cart.save();

    res.status(200).json({
      success: true,
      message: "Số lượng sản phẩm đã được cập nhật",
      cart
    });
  } catch (error) {
    console.error("Lỗi khi cập nhật số lượng sản phẩm:", error);
    res.status(500).json({ success: false, message: "Lỗi server" });
  }
};exports.updateCartItem = updateCartItem;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQ2FydCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX1Byb2R1Y3RzIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZ2V0Q2FydCIsInJlcSIsInJlcyIsInVzZXJJZCIsInBhcmFtcyIsImNhcnQiLCJDYXJ0IiwiZmluZE9uZSIsInBvcHVsYXRlIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJpdGVtcyIsInNvcnQiLCJhIiwiYiIsImNyZWF0ZWRBdCIsInN1Y2Nlc3MiLCJlcnJvciIsImNvbnNvbGUiLCJleHBvcnRzIiwiY2xlYXJDYXJ0IiwiYm9keSIsInNhdmUiLCJhZGRUb0NhcnQiLCJwcm9kdWN0SWQiLCJxdWFudGl0eSIsInByb2R1Y3QiLCJQcm9kdWN0IiwiZmluZEJ5SWQiLCJwcmljZSIsInByb2R1Y3REaXNjb3VudCIsInByb2R1Y3RQcm9tb1ByaWNlIiwicHJvZHVjdFByaWNlIiwiZXhpc3RpbmdJdGVtIiwiZmluZCIsIml0ZW0iLCJ0b1N0cmluZyIsIkRhdGUiLCJwdXNoIiwicmVtb3ZlRnJvbUNhcnQiLCJmaWx0ZXIiLCJ1cGRhdGVDYXJ0SXRlbSJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9Db250cm9sbGVyL2NhcnRDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYXJ0IGZyb20gXCIuLi9Nb2RlbC9DYXJ0LmpzXCI7XHJcbmltcG9ydCBQcm9kdWN0IGZyb20gXCIuLi9Nb2RlbC9Qcm9kdWN0cy5qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldENhcnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBDYXJ0LmZpbmRPbmUoeyB1c2VySWQgfSkucG9wdWxhdGUoXCJpdGVtcy5wcm9kdWN0SWRcIik7XHJcbiAgICBpZiAoIWNhcnQpIHtcclxuICAgICAgcmV0dXJuIHJlc1xyXG4gICAgICAgIC5zdGF0dXMoNDA0KVxyXG4gICAgICAgIC5qc29uKHsgIG1lc3NhZ2U6IFwiR2nhu48gaMOgbmcga2jDtG5nIHThu5NuIHThuqFpXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FydC5pdGVtcy5zb3J0KChhLCBiKSA9PiBiLmNyZWF0ZWRBdCAtIGEuY3JlYXRlZEF0KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNhcnQgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJM4buXaSBraGkgbOG6pXkgZ2nhu48gaMOgbmc6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTOG7l2kgc2VydmVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNsZWFyQ2FydCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdXNlcklkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBDYXJ0LmZpbmRPbmUoeyB1c2VySWQgfSk7XHJcblxyXG4gICAgaWYgKCFjYXJ0KSB7XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgICAgICAuc3RhdHVzKDQwNClcclxuICAgICAgICAuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkdp4buPIGjDoG5nIGtow7RuZyB04buTbiB04bqhaVwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFjDs2EgdOG6pXQgY+G6oyBjw6FjIGl0ZW0gdHJvbmcgZ2nhu48gaMOgbmdcclxuICAgIGNhcnQuaXRlbXMgPSBbXTtcclxuICAgIGF3YWl0IGNhcnQuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogXCLEkMOjIHjDs2EgdOG6pXQgY+G6oyBz4bqjbiBwaOG6qW0ga2jhu49pIGdp4buPIGjDoG5nXCIsXHJcbiAgICAgIGNhcnQsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkzhu5dpIGtoaSB4w7NhIHRvw6BuIGLhu5kgZ2nhu48gaMOgbmc6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTOG7l2kgc2VydmVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFRvQ2FydCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdXNlcklkLCBwcm9kdWN0SWQsIHF1YW50aXR5IH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGxldCBjYXJ0ID0gYXdhaXQgQ2FydC5maW5kT25lKHsgdXNlcklkIH0pO1xyXG4gICAgXHJcbiAgICAvLyBM4bqleSB0aMO0bmcgdGluIHPhuqNuIHBo4bqpbSDEkeG7gyBjw7MgZ2nDoSBjaMOtbmggeMOhY1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocHJvZHVjdElkKTtcclxuICAgIFxyXG4gICAgaWYgKCFwcm9kdWN0KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogXCJT4bqjbiBwaOG6qW0ga2jDtG5nIHThu5NuIHThuqFpXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFTDrW5oIGdpw6EgZOG7sWEgdHLDqm4gdmnhu4djIGPDsyBnaeG6o20gZ2nDoSBoYXkga2jDtG5nXHJcbiAgICBjb25zdCBwcmljZSA9IHByb2R1Y3QucHJvZHVjdERpc2NvdW50ID4gMFxyXG4gICAgICA/IHByb2R1Y3QucHJvZHVjdFByb21vUHJpY2VcclxuICAgICAgOiBwcm9kdWN0LnByb2R1Y3RQcmljZTtcclxuXHJcbiAgICBpZiAoIWNhcnQpIHtcclxuICAgICAgY2FydCA9IG5ldyBDYXJ0KHsgdXNlcklkLCBpdGVtczogW10gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXhpc3RpbmdJdGVtID0gY2FydC5pdGVtcy5maW5kKFxyXG4gICAgICAoaXRlbSkgPT4gaXRlbS5wcm9kdWN0SWQudG9TdHJpbmcoKSA9PT0gcHJvZHVjdElkXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChleGlzdGluZ0l0ZW0pIHtcclxuICAgICAgZXhpc3RpbmdJdGVtLnF1YW50aXR5ICs9IHF1YW50aXR5O1xyXG4gICAgICBleGlzdGluZ0l0ZW0ucHJpY2UgPSBwcmljZTsgLy8gQ+G6rXAgbmjhuq10IGdpw6EgbeG7m2kgbmjhuqV0XHJcbiAgICAgIGV4aXN0aW5nSXRlbS5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FydC5pdGVtcy5wdXNoKHtcclxuICAgICAgICBwcm9kdWN0SWQsXHJcbiAgICAgICAgcXVhbnRpdHksXHJcbiAgICAgICAgcHJpY2UsIC8vIEzGsHUgZ2nDoSB2w6BvIGl0ZW0gZ2nhu48gaMOgbmdcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGNhcnQuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogXCJT4bqjbiBwaOG6qW0gxJHDoyDEkcaw4bujYyB0aMOqbSB2w6BvIGdp4buPIGjDoG5nXCIsXHJcbiAgICAgIGNhcnQsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkzhu5dpIGtoaSB0aMOqbSB2w6BvIGdp4buPIGjDoG5nOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkzhu5dpIHNlcnZlclwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVGcm9tQ2FydCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdXNlcklkLCBwcm9kdWN0SWQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgY2FydCA9IGF3YWl0IENhcnQuZmluZE9uZSh7IHVzZXJJZCB9KTtcclxuXHJcbiAgICBpZiAoIWNhcnQpIHtcclxuICAgICAgcmV0dXJuIHJlc1xyXG4gICAgICAgIC5zdGF0dXMoNDA0KVxyXG4gICAgICAgIC5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiR2nhu48gaMOgbmcga2jDtG5nIHThu5NuIHThuqFpXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FydC5pdGVtcyA9IGNhcnQuaXRlbXMuZmlsdGVyKFxyXG4gICAgICAoaXRlbSkgPT4gaXRlbS5wcm9kdWN0SWQudG9TdHJpbmcoKSAhPT0gcHJvZHVjdElkXHJcbiAgICApO1xyXG5cclxuICAgIGF3YWl0IGNhcnQuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogXCJT4bqjbiBwaOG6qW0gxJHDoyDEkcaw4bujYyB4w7NhIGto4buPaSBnaeG7jyBow6BuZ1wiLFxyXG4gICAgICBjYXJ0LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJM4buXaSBraGkgeMOzYSBz4bqjbiBwaOG6qW0ga2jhu49pIGdp4buPIGjDoG5nOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkzhu5dpIHNlcnZlclwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVDYXJ0SXRlbSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdXNlcklkLCBwcm9kdWN0SWQsIHF1YW50aXR5IH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBDYXJ0LmZpbmRPbmUoeyB1c2VySWQgfSk7XHJcblxyXG4gICAgaWYgKCFjYXJ0KSB7XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgICAgICAuc3RhdHVzKDQwNClcclxuICAgICAgICAuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkdp4buPIGjDoG5nIGtow7RuZyB04buTbiB04bqhaVwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IGNhcnQuaXRlbXMuZmluZChcclxuICAgICAgKGl0ZW0pID0+IGl0ZW0ucHJvZHVjdElkLnRvU3RyaW5nKCkgPT09IHByb2R1Y3RJZFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIWV4aXN0aW5nSXRlbSkge1xyXG4gICAgICByZXR1cm4gcmVzXHJcbiAgICAgICAgLnN0YXR1cyg0MDQpXHJcbiAgICAgICAgLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBtZXNzYWdlOiBcIlPhuqNuIHBo4bqpbSBraMO0bmcgdOG7k24gdOG6oWkgdHJvbmcgZ2nhu48gaMOgbmdcIixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBleGlzdGluZ0l0ZW0ucXVhbnRpdHkgPSBxdWFudGl0eTtcclxuICAgIGV4aXN0aW5nSXRlbS5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgIGF3YWl0IGNhcnQuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogXCJT4buRIGzGsOG7o25nIHPhuqNuIHBo4bqpbSDEkcOjIMSRxrDhu6NjIGPhuq1wIG5o4bqtdFwiLFxyXG4gICAgICBjYXJ0LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJM4buXaSBraGkgY+G6rXAgbmjhuq10IHPhu5EgbMaw4bujbmcgc+G6o24gcGjhuqltOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkzhu5dpIHNlcnZlclwiIH0pO1xyXG4gIH1cclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOExBQUEsSUFBQUEsS0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBLDBCQUEyQyxTQUFBRCx1QkFBQUcsQ0FBQSxVQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTs7QUFFcEMsTUFBTUcsT0FBTyxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3pDLE1BQU0sRUFBRUMsTUFBTSxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDRyxNQUFNOztFQUU3QixJQUFJO0lBQ0YsTUFBTUMsSUFBSSxHQUFHLE1BQU1DLGFBQUksQ0FBQ0MsT0FBTyxDQUFDLEVBQUVKLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQ0ssUUFBUSxDQUFDLGlCQUFpQixDQUFDO0lBQ3ZFLElBQUksQ0FBQ0gsSUFBSSxFQUFFO01BQ1QsT0FBT0gsR0FBRztNQUNQTyxNQUFNLENBQUMsR0FBRyxDQUFDO01BQ1hDLElBQUksQ0FBQyxFQUFHQyxPQUFPLEVBQUUsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO0lBQ2pEOztJQUVBTixJQUFJLENBQUNPLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUNDLENBQUMsRUFBRUMsQ0FB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QUFBQSxDQUFPekMsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDaEQsTUFBTSxFQUFFQyxNQUFNLEVBQUVzQixTQUFTLEVBQUVDLFFBQVEsQ0FBQyxDQUFDLEdBQUd6QixHQUFHLENBQUNxQixJQUFJOztFQUVoRCxJQUFJO0lBQ0YsTUFBTWpCLElBQUksR0FBRyxNQUFNQyxhQUFJLENBQUNDLE9BQU8sQ0FBQyxFQUFFSixNQUFNLENBQUMsQ0FBQyxDQUFDOztJQUUzQyxJQUFJLENBQUNFLElBQUksRUFBRTtNQUNULE9BQU9ILEdBQUc7TUFDUE8sTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUNYQyxJQUFJLENBQUMsRUFBRU8sT0FBTyxFQUFFLEtBQUssRUFBRU4sT0FBTyxFQUFFLHdCQUF3QixDQUFDLENBQUMsQ0FBQztJQUNoRTs7SUFFQSxNQUFNdUIsWUFBWSxHQUFHN0IsSUFBSSxDQUFDTyxLQUFLLENBQUN1QixJQUFJO01BQ2xDLENBQUNDLElBQUksS0FBS0EsSUFBSSxDQUFDWCxTQUFTLENBQUNZLFFBQVEsQ0FBQyxDQUFDLEtBQUtaO0lBQzFDLENBQUM7O0lBRUQsSUFBSSxDQUFDUyxZQUFZLEVBQUU7TUFDakIsT0FBT2hDLEdBQUc7TUFDUE8sTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUNYQyxJQUFJLENBQUM7UUFDSk8sT0FBTyxFQUFFLEtBQUs7UUFDZE4sT0FBTyxFQUFFO01BQ1gsQ0FBQyxDQUFDO0lBQ047O0lBRUF1QixZQUFZLENBQUNSLFFBQVEsR0FBR0EsUUFBUTtJQUNoQ1EsWUFBWSxDQUFDbEIsU0FBUyxHQUFHLElBQUlzQixJQUFJLENBQUMsQ0FBQzs7SUFFbkMsTUFBTWpDLElBQUksQ0FBQ2tCLElBQUksQ0FBQyxDQUFDOztJQUVqQnJCLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJPLE9BQU8sRUFBRSxJQUFJO01BQ2JOLE9BQU8sRUFBRSxvQ0FBb0M7TUFDN0NOO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU9hLEtBQUssRUFBRTtJQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQyxxQ0FBcUMsRUFBRUEsS0FBSyxDQUFDO0lBQzNEaEIsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxFQUFFTyxPQUFPLEVBQUUsS0FBSyxFQUFFTixPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQztFQUNqRTtBQUNGLENBQUMsQ0FBQ1MsT0FBQSxDQUFBc0IsY0FBQSxHQUFBQSxjQUFBIiwiaWdub3JlTGlzdCI6W119