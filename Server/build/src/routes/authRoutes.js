"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _express = _interopRequireDefault(require("express"));
var _authController = require("../Controller/authController.js");

























var _authMiddleware = require("../Middleware/authMiddleware.js");function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

const router = _express.default.Router();

router.post("/register", _authController.register);
router.post("/login", _authController.login);
router.post("/logout", _authController.logout);
router.post("/refresh-token", _authController.refreshToken);
router.get("/profile", _authController.getAllUser);
router.get("/profile/:id", _authMiddleware.verifyToken, _authController.getUserProfile);
router.put("/update/:userId", _authMiddleware.verifyToken, _authController.updateUser);
router.post("/request-password-reset", _authController.requestPasswordReset);
router.post("/reset-password", _authController.resetPassword);
router.put("/profile/block/:userId", _authController.blockUser);

// User avatar route
router.get("/users/avatar/:id", _authController.getUserAvatar);

// Thêm các route cho OAuth
router.post("/facebook-login", _authController.facebookLogin);
router.post("/facebook-token", _authController.facebookTokenLogin);
router.post("/google-login", _authController.googleLogin);
router.get("/facebook/callback", _authController.facebookCallback);

// Route để lấy VAPID Public Key
router.get("/vapid-public-key", _authController.getVapidPublicKey);

// Route để đăng ký nhận Push Subscription
router.post("/subscribe", _authMiddleware.verifyToken, _authController.subscribeToPush);

// Add the validation route
router.post('/validate-subscription', _authController.validateSubscription);

// Các route quản lý địa chỉ
router.post("/user/:userId/addresses", _authMiddleware.verifyToken, _authController.addUserAddress);
router.get("/user/:userId/addresses", _authMiddleware.verifyToken, _authController.getUserAddresses);
router.put("/user/:userId/addresses/:addressId", _authMiddleware.verifyToken, _authController.updateUserAddress);
router.delete("/user/:userId/addresses/:addressId", _authMiddleware.verifyToken, _authController.deleteUserAddress);
router.put("/user/:userId/addresses/:addressId/default", _authMiddleware.verifyToken, _authController.setDefaultAddress);

// Admin route to migrate all legacy addresses
router.post("/admin/migrate-addresses", _authMiddleware.verifyToken, _authController.migrateAllLegacyAddresses);var _default = exports.default =

router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2F1dGhDb250cm9sbGVyIiwiX2F1dGhNaWRkbGV3YXJlIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJyZWdpc3RlciIsImxvZ2luIiwibG9nb3V0IiwicmVmcmVzaFRva2VuIiwiZ2V0IiwiZ2V0QWxsVXNlciIsInZlcmlmeVRva2VuIiwiZ2V0VXNlclByb2ZpbGUiLCJwdXQiLCJ1cGRhdGVVc2VyIiwicmVxdWVzdFBhc3N3b3JkUmVzZXQiLCJyZXNldFBhc3N3b3JkIiwiYmxvY2tVc2VyIiwiZ2V0VXNlckF2YXRhciIsImZhY2Vib29rTG9naW4iLCJmYWNlYm9va1Rva2VuTG9naW4iLCJnb29nbGVMb2dpbiIsImZhY2Vib29rQ2FsbGJhY2siLCJnZXRWYXBpZFB1YmxpY0tleSIsInN1YnNjcmliZVRvUHVzaCIsInZhbGlkYXRlU3Vic2NyaXB0aW9uIiwiYWRkVXNlckFkZHJlc3MiLCJnZXRVc2VyQWRkcmVzc2VzIiwidXBkYXRlVXNlckFkZHJlc3MiLCJkZWxldGUiLCJkZWxldGVVc2VyQWRkcmVzcyIsInNldERlZmF1bHRBZGRyZXNzIiwibWlncmF0ZUFsbExlZ2FjeUFkZHJlc3NlcyIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yb3V0ZXMvYXV0aFJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHtcbiAgcmVnaXN0ZXIsXG4gIGxvZ2luLFxuICBsb2dvdXQsXG4gIHJlZnJlc2hUb2tlbixcbiAgZ2V0VXNlclByb2ZpbGUsXG4gIGdldEFsbFVzZXIsXG4gIHVwZGF0ZVVzZXIsXG4gIHJlcXVlc3RQYXNzd29yZFJlc2V0LFxuICByZXNldFBhc3N3b3JkLFxuICBibG9ja1VzZXIsXG4gIGZhY2Vib29rTG9naW4sXG4gIGdvb2dsZUxvZ2luLFxuICBmYWNlYm9va0NhbGxiYWNrLFxuICBmYWNlYm9va1Rva2VuTG9naW4sXG4gIGdldFVzZXJBdmF0YXIsXG4gIGdldFZhcGlkUHVibGljS2V5LFxuICBzdWJzY3JpYmVUb1B1c2gsXG4gIHZhbGlkYXRlU3Vic2NyaXB0aW9uLFxuICBhZGRVc2VyQWRkcmVzcyxcbiAgZ2V0VXNlckFkZHJlc3NlcyxcbiAgdXBkYXRlVXNlckFkZHJlc3MsXG4gIGRlbGV0ZVVzZXJBZGRyZXNzLFxuICBzZXREZWZhdWx0QWRkcmVzcyxcbiAgbWlncmF0ZUFsbExlZ2FjeUFkZHJlc3Nlc1xufSBmcm9tIFwiLi4vQ29udHJvbGxlci9hdXRoQ29udHJvbGxlci5qc1wiO1xuaW1wb3J0IHsgdmVyaWZ5VG9rZW4gfSBmcm9tIFwiLi4vTWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZS5qc1wiO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIucG9zdChcIi9yZWdpc3RlclwiLCByZWdpc3Rlcik7XG5yb3V0ZXIucG9zdChcIi9sb2dpblwiLCBsb2dpbik7XG5yb3V0ZXIucG9zdChcIi9sb2dvdXRcIiwgbG9nb3V0KTtcbnJvdXRlci5wb3N0KFwiL3JlZnJlc2gtdG9rZW5cIiwgcmVmcmVzaFRva2VuKTtcbnJvdXRlci5nZXQoXCIvcHJvZmlsZVwiLCBnZXRBbGxVc2VyKTtcbnJvdXRlci5nZXQoXCIvcHJvZmlsZS86aWRcIiwgdmVyaWZ5VG9rZW4sIGdldFVzZXJQcm9maWxlKTtcbnJvdXRlci5wdXQoXCIvdXBkYXRlLzp1c2VySWRcIiwgdmVyaWZ5VG9rZW4sIHVwZGF0ZVVzZXIpO1xucm91dGVyLnBvc3QoXCIvcmVxdWVzdC1wYXNzd29yZC1yZXNldFwiLCByZXF1ZXN0UGFzc3dvcmRSZXNldCk7XG5yb3V0ZXIucG9zdChcIi9yZXNldC1wYXNzd29yZFwiLCByZXNldFBhc3N3b3JkKTtcbnJvdXRlci5wdXQoXCIvcHJvZmlsZS9ibG9jay86dXNlcklkXCIsIGJsb2NrVXNlcik7XG5cbi8vIFVzZXIgYXZhdGFyIHJvdXRlXG5yb3V0ZXIuZ2V0KFwiL3VzZXJzL2F2YXRhci86aWRcIiwgZ2V0VXNlckF2YXRhcik7XG5cbi8vIFRow6ptIGPDoWMgcm91dGUgY2hvIE9BdXRoXG5yb3V0ZXIucG9zdChcIi9mYWNlYm9vay1sb2dpblwiLCBmYWNlYm9va0xvZ2luKTtcbnJvdXRlci5wb3N0KFwiL2ZhY2Vib29rLXRva2VuXCIsIGZhY2Vib29rVG9rZW5Mb2dpbik7XG5yb3V0ZXIucG9zdChcIi9nb29nbGUtbG9naW5cIiwgZ29vZ2xlTG9naW4pO1xucm91dGVyLmdldChcIi9mYWNlYm9vay9jYWxsYmFja1wiLCBmYWNlYm9va0NhbGxiYWNrKTtcblxuLy8gUm91dGUgxJHhu4MgbOG6pXkgVkFQSUQgUHVibGljIEtleVxucm91dGVyLmdldChcIi92YXBpZC1wdWJsaWMta2V5XCIsIGdldFZhcGlkUHVibGljS2V5KTtcblxuLy8gUm91dGUgxJHhu4MgxJHEg25nIGvDvSBuaOG6rW4gUHVzaCBTdWJzY3JpcHRpb25cbnJvdXRlci5wb3N0KFwiL3N1YnNjcmliZVwiLCB2ZXJpZnlUb2tlbiwgc3Vic2NyaWJlVG9QdXNoKTtcblxuLy8gQWRkIHRoZSB2YWxpZGF0aW9uIHJvdXRlXG5yb3V0ZXIucG9zdCgnL3ZhbGlkYXRlLXN1YnNjcmlwdGlvbicsIHZhbGlkYXRlU3Vic2NyaXB0aW9uKTtcblxuLy8gQ8OhYyByb3V0ZSBxdeG6o24gbMO9IMSR4buLYSBjaOG7iVxucm91dGVyLnBvc3QoXCIvdXNlci86dXNlcklkL2FkZHJlc3Nlc1wiLCB2ZXJpZnlUb2tlbiwgYWRkVXNlckFkZHJlc3MpO1xucm91dGVyLmdldChcIi91c2VyLzp1c2VySWQvYWRkcmVzc2VzXCIsIHZlcmlmeVRva2VuLCBnZXRVc2VyQWRkcmVzc2VzKTtcbnJvdXRlci5wdXQoXCIvdXNlci86dXNlcklkL2FkZHJlc3Nlcy86YWRkcmVzc0lkXCIsIHZlcmlmeVRva2VuLCB1cGRhdGVVc2VyQWRkcmVzcyk7XG5yb3V0ZXIuZGVsZXRlKFwiL3VzZXIvOnVzZXJJZC9hZGRyZXNzZXMvOmFkZHJlc3NJZFwiLCB2ZXJpZnlUb2tlbiwgZGVsZXRlVXNlckFkZHJlc3MpO1xucm91dGVyLnB1dChcIi91c2VyLzp1c2VySWQvYWRkcmVzc2VzLzphZGRyZXNzSWQvZGVmYXVsdFwiLCB2ZXJpZnlUb2tlbiwgc2V0RGVmYXVsdEFkZHJlc3MpO1xuXG4vLyBBZG1pbiByb3V0ZSB0byBtaWdyYXRlIGFsbCBsZWdhY3kgYWRkcmVzc2VzXG5yb3V0ZXIucG9zdChcIi9hZG1pbi9taWdyYXRlLWFkZHJlc3Nlc1wiLCB2ZXJpZnlUb2tlbiwgbWlncmF0ZUFsbExlZ2FjeUFkZHJlc3Nlcyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Im9HQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQkEsSUFBQUUsZUFBQSxHQUFBRixPQUFBLG9DQUE4RCxTQUFBRCx1QkFBQUksQ0FBQSxVQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTs7QUFFOUQsTUFBTUcsTUFBTSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLENBQUMsQ0FBQzs7QUFFL0JGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFdBQVcsRUFBRUMsd0JBQVEsQ0FBQztBQUNsQ0osTUFBTSxDQUFDRyxJQUFJLENBQUMsUUFBUSxFQUFFRSxxQkFBSyxDQUFDO0FBQzVCTCxNQUFNLENBQUNHLElBQUksQ0FBQyxTQUFTLEVBQUVHLHNCQUFNLENBQUM7QUFDOUJOLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLGdCQUFnQixFQUFFSSw0QkFBWSxDQUFDO0FBQzNDUCxNQUFNLENBQUNRLEdBQUcsQ0FBQyxVQUFVLEVBQUVDLDBCQUFVLENBQUM7QUFDbENULE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLGNBQWMsRUFBRUUsMkJBQVcsRUFBRUMsOEJBQWMsQ0FBQztBQUN2RFgsTUFBTSxDQUFDWSxHQUFHLENBQUMsaUJBQWlCLEVBQUVGLDJCQUFXLEVBQUVHLDBCQUFVLENBQUM7QUFDdERiLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLHlCQUF5QixFQUFFVyxvQ0FBb0IsQ0FBQztBQUM1RGQsTUFBTSxDQUFDRyxJQUFJLENBQUMsaUJBQWlCLEVBQUVZLDZCQUFhLENBQUM7QUFDN0NmLE1BQU0sQ0FBQ1ksR0FBRyxDQUFDLHdCQUF3QixFQUFFSSx5QkFBUyxDQUFDOztBQUUvQztBQUNBaEIsTUFBTSxDQUFDUSxHQUFHLENBQUMsbUJBQW1CLEVBQUVTLDZCQUFhLENBQUM7O0FBRTlDO0FBQ0FqQixNQUFNLENBQUNHLElBQUksQ0FBQyxpQkFBaUIsRUFBRWUsNkJBQWEsQ0FBQztBQUM3Q2xCLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLGlCQUFpQixFQUFFZ0Isa0NBQWtCLENBQUM7QUFDbERuQixNQUFNLENBQUNHLElBQUksQ0FBQyxlQUFlLEVBQUVpQiwyQkFBVyxDQUFDO0FBQ3pDcEIsTUFBTSxDQUFDUSxHQUFHLENBQUMsb0JBQW9CLEVBQUVhLGdDQUFnQixDQUFDOztBQUVsRDtBQUNBckIsTUFBTSxDQUFDUSxHQUFHLENBQUMsbUJBQW1CLEVBQUVjLGlDQUFpQixDQUFDOztBQUVsRDtBQUNBdEIsTUFBTSxDQUFDRyxJQUFJLENBQUMsWUFBWSxFQUFFTywyQkFBVyxFQUFFYSwrQkFBZSxDQUFDOztBQUV2RDtBQUNBdkIsTUFBTSxDQUFDRyxJQUFJLENBQUMsd0JBQXdCLEVBQUVxQixvQ0FBb0IsQ0FBQzs7QUFFM0Q7QUFDQXhCLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLHlCQUF5QixFQUFFTywyQkFBVyxFQUFFZSw4QkFBYyxDQUFDO0FBQ25FekIsTUFBTSxDQUFDUSxHQUFHLENBQUMseUJBQXlCLEVBQUVFLDJCQUFXLEVBQUVnQixnQ0FBZ0IsQ0FBQztBQUNwRTFCLE1BQU0sQ0FBQ1ksR0FBRyxDQUFDLG9DQUFvQyxFQUFFRiwyQkFBVyxFQUFFaUIsaUNBQWlCLENBQUM7QUFDaEYzQixNQUFNLENBQUM0QixNQUFNLENBQUMsb0NBQW9DLEVBQUVsQiwyQkFBVyxFQUFFbUIsaUNBQWlCLENBQUM7QUFDbkY3QixNQUFNLENBQUNZLEdBQUcsQ0FBQyw0Q0FBNEMsRUFBRUYsMkJBQVcsRUFBRW9CLGlDQUFpQixDQUFDOztBQUV4RjtBQUNBOUIsTUFBTSxDQUFDRyxJQUFJLENBQUMsMEJBQTBCLEVBQUVPLDJCQUFXLEVBQUVxQix5Q0FBeUIsQ0FBQyxDQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBbEMsT0FBQTs7QUFFakVDLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=