"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;
var _express = _interopRequireDefault(require("express"));
var _database = require("../config/database.js"); /* eslint-disable no-undef */


const router = _express.default.Router();

/**
 * API trung gian để truy cập MongoDB từ thiết bị di động
 * Thay vì kết nối trực tiếp từ client, client sẽ gọi các API endpoints này
 */

// Middleware kiểm tra kết nối MongoDB
const checkMongoConnection = (req, res, next) => {
  if (!_database.isMongoConnected) {
    return res.status(503).json({
      success: false,
      message: 'Database connection unavailable',
      status: 'disconnected'
    });
  }
  next();
};

// API endpoint kiểm tra trạng thái kết nối
router.get('/status', (req, res) => {
  const status = _database.isMongoConnected ? 'connected' : 'disconnected';
  const readyState = _database.mongoose.connection.readyState;

  res.json({
    success: true,
    status,
    readyState,
    timestamp: new Date().toISOString()
  });
});

// API endpoint tổng quát để truy vấn collection
router.post('/query/:collection', checkMongoConnection, async (req, res) => {
  try {
    const { collection } = req.params;
    const { query = {}, projection = {}, options = {}, limit = 100, skip = 0 } = req.body;

    // Giới hạn số lượng kết quả trả về để tránh quá tải
    options.limit = Math.min(limit, 100);
    options.skip = skip;

    // Thực hiện truy vấn
    const db = _database.mongoose.connection.db;
    const results = await db.collection(collection).
    find(query, projection).
    limit(options.limit).
    skip(options.skip).
    toArray();

    res.json({
      success: true,
      count: results.length,
      data: results
    });
  } catch (error) {
    console.error(`Error querying collection ${req.params.collection}:`, error);
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
});

// API endpoint để lấy document theo ID
router.get('/document/:collection/:id', checkMongoConnection, async (req, res) => {
  try {
    const { collection, id } = req.params;

    // Validate ObjectId
    if (!_database.mongoose.Types.ObjectId.isValid(id)) {
      return res.status(400).json({
        success: false,
        message: 'Invalid ObjectId format'
      });
    }

    // Thực hiện truy vấn
    const db = _database.mongoose.connection.db;
    const result = await db.collection(collection).findOne({
      _id: new _database.mongoose.Types.ObjectId(id)
    });

    if (!result) {
      return res.status(404).json({
        success: false,
        message: 'Document not found'
      });
    }

    res.json({
      success: true,
      data: result
    });
  } catch (error) {
    console.error(`Error getting document from ${req.params.collection}:`, error);
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
});

// API endpoint để tạo document mới
router.post('/document/:collection', checkMongoConnection, async (req, res) => {
  try {
    const { collection } = req.params;
    const document = req.body;

    // Validate document
    if (!document || Object.keys(document).length === 0) {
      return res.status(400).json({
        success: false,
        message: 'Empty document'
      });
    }

    // Thực hiện thêm mới
    const db = _database.mongoose.connection.db;
    const result = await db.collection(collection).insertOne(document);

    res.status(201).json({
      success: true,
      insertedId: result.insertedId,
      data: document
    });
  } catch (error) {
    console.error(`Error creating document in ${req.params.collection}:`, error);
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
});

// API endpoint để cập nhật document
router.put('/document/:collection/:id', checkMongoConnection, async (req, res) => {
  try {
    const { collection, id } = req.params;
    const updates = req.body;

    // Validate ObjectId
    if (!_database.mongoose.Types.ObjectId.isValid(id)) {
      return res.status(400).json({
        success: false,
        message: 'Invalid ObjectId format'
      });
    }

    // Validate updates
    if (!updates || Object.keys(updates).length === 0) {
      return res.status(400).json({
        success: false,
        message: 'No updates provided'
      });
    }

    // Thực hiện cập nhật
    const db = _database.mongoose.connection.db;
    const result = await db.collection(collection).updateOne(
      { _id: new _database.mongoose.Types.ObjectId(id) },
      { $set: updates }
    );

    if (result.matchedCount === 0) {
      return res.status(404).json({
        success: false,
        message: 'Document not found'
      });
    }

    res.json({
      success: true,
      modifiedCount: result.modifiedCount,
      matchedCount: result.matchedCount
    });
  } catch (error) {
    console.error(`Error updating document in ${req.params.collection}:`, error);
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
});

// API endpoint để xóa document
router.delete('/document/:collection/:id', checkMongoConnection, async (req, res) => {
  try {
    const { collection, id } = req.params;

    // Validate ObjectId
    if (!_database.mongoose.Types.ObjectId.isValid(id)) {
      return res.status(400).json({
        success: false,
        message: 'Invalid ObjectId format'
      });
    }

    // Thực hiện xóa
    const db = _database.mongoose.connection.db;
    const result = await db.collection(collection).deleteOne({
      _id: new _database.mongoose.Types.ObjectId(id)
    });

    if (result.deletedCount === 0) {
      return res.status(404).json({
        success: false,
        message: 'Document not found'
      });
    }

    res.json({
      success: true,
      deletedCount: result.deletedCount
    });
  } catch (error) {
    console.error(`Error deleting document from ${req.params.collection}:`, error);
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
});

// API endpoint để đếm số lượng documents trong collection
router.post('/count/:collection', checkMongoConnection, async (req, res) => {
  try {
    const { collection } = req.params;
    const { query = {} } = req.body;

    // Thực hiện đếm
    const db = _database.mongoose.connection.db;
    const count = await db.collection(collection).countDocuments(query);

    res.json({
      success: true,
      count
    });
  } catch (error) {
    console.error(`Error counting documents in ${req.params.collection}:`, error);
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
});

// API endpoint để lấy danh sách collections
router.get('/collections', checkMongoConnection, async (req, res) => {
  try {
    const db = _database.mongoose.connection.db;
    const collections = await db.listCollections().toArray();

    res.json({
      success: true,
      collections: collections.map((col) => col.name)
    });
  } catch (error) {
    console.error('Error listing collections:', error);
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
});var _default = exports.default =

router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RhdGFiYXNlIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImNoZWNrTW9uZ29Db25uZWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsImlzTW9uZ29Db25uZWN0ZWQiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJnZXQiLCJyZWFkeVN0YXRlIiwibW9uZ29vc2UiLCJjb25uZWN0aW9uIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicG9zdCIsImNvbGxlY3Rpb24iLCJwYXJhbXMiLCJxdWVyeSIsInByb2plY3Rpb24iLCJvcHRpb25zIiwibGltaXQiLCJza2lwIiwiYm9keSIsIk1hdGgiLCJtaW4iLCJkYiIsInJlc3VsdHMiLCJmaW5kIiwidG9BcnJheSIsImNvdW50IiwibGVuZ3RoIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsImlkIiwiVHlwZXMiLCJPYmplY3RJZCIsImlzVmFsaWQiLCJyZXN1bHQiLCJmaW5kT25lIiwiX2lkIiwiZG9jdW1lbnQiLCJPYmplY3QiLCJrZXlzIiwiaW5zZXJ0T25lIiwiaW5zZXJ0ZWRJZCIsInB1dCIsInVwZGF0ZXMiLCJ1cGRhdGVPbmUiLCIkc2V0IiwibWF0Y2hlZENvdW50IiwibW9kaWZpZWRDb3VudCIsImRlbGV0ZSIsImRlbGV0ZU9uZSIsImRlbGV0ZWRDb3VudCIsImNvdW50RG9jdW1lbnRzIiwiY29sbGVjdGlvbnMiLCJsaXN0Q29sbGVjdGlvbnMiLCJtYXAiLCJjb2wiLCJuYW1lIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yb3V0ZXMvYXBpUm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXHJcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgeyBtb25nb29zZSB9IGZyb20gJy4uL2NvbmZpZy9kYXRhYmFzZS5qcyc7XHJcbmltcG9ydCB7IGlzTW9uZ29Db25uZWN0ZWQgfSBmcm9tICcuLi9jb25maWcvZGF0YWJhc2UuanMnO1xyXG5cclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbi8qKlxyXG4gKiBBUEkgdHJ1bmcgZ2lhbiDEkeG7gyB0cnV5IGPhuq1wIE1vbmdvREIgdOG7qyB0aGnhur90IGLhu4sgZGkgxJHhu5luZ1xyXG4gKiBUaGF5IHbDrCBr4bq/dCBu4buRaSB0cuG7sWMgdGnhur9wIHThu6sgY2xpZW50LCBjbGllbnQgc+G6vSBn4buNaSBjw6FjIEFQSSBlbmRwb2ludHMgbsOgeVxyXG4gKi9cclxuXHJcbi8vIE1pZGRsZXdhcmUga2nhu4NtIHRyYSBr4bq/dCBu4buRaSBNb25nb0RCXHJcbmNvbnN0IGNoZWNrTW9uZ29Db25uZWN0aW9uID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgaWYgKCFpc01vbmdvQ29ubmVjdGVkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDMpLmpzb24oeyBcclxuICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiB1bmF2YWlsYWJsZScsXHJcbiAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCdcclxuICAgIH0pO1xyXG4gIH1cclxuICBuZXh0KCk7XHJcbn07XHJcblxyXG4vLyBBUEkgZW5kcG9pbnQga2nhu4NtIHRyYSB0cuG6oW5nIHRow6FpIGvhur90IG7hu5FpXHJcbnJvdXRlci5nZXQoJy9zdGF0dXMnLCAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBzdGF0dXMgPSBpc01vbmdvQ29ubmVjdGVkID8gJ2Nvbm5lY3RlZCcgOiAnZGlzY29ubmVjdGVkJztcclxuICBjb25zdCByZWFkeVN0YXRlID0gbW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlO1xyXG4gIFxyXG4gIHJlcy5qc29uKHtcclxuICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICBzdGF0dXMsXHJcbiAgICByZWFkeVN0YXRlLFxyXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICB9KTtcclxufSk7XHJcblxyXG4vLyBBUEkgZW5kcG9pbnQgdOG7lW5nIHF1w6F0IMSR4buDIHRydXkgduG6pW4gY29sbGVjdGlvblxyXG5yb3V0ZXIucG9zdCgnL3F1ZXJ5Lzpjb2xsZWN0aW9uJywgY2hlY2tNb25nb0Nvbm5lY3Rpb24sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24gfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IHF1ZXJ5ID0ge30sIHByb2plY3Rpb24gPSB7fSwgb3B0aW9ucyA9IHt9LCBsaW1pdCA9IDEwMCwgc2tpcCA9IDAgfSA9IHJlcS5ib2R5O1xyXG4gICAgXHJcbiAgICAvLyBHaeG7m2kgaOG6oW4gc+G7kSBsxrDhu6NuZyBr4bq/dCBxdeG6oyB0cuG6oyB24buBIMSR4buDIHRyw6FuaCBxdcOhIHThuqNpXHJcbiAgICBvcHRpb25zLmxpbWl0ID0gTWF0aC5taW4obGltaXQsIDEwMCk7XHJcbiAgICBvcHRpb25zLnNraXAgPSBza2lwO1xyXG4gICAgXHJcbiAgICAvLyBUaOG7sWMgaGnhu4duIHRydXkgduG6pW5cclxuICAgIGNvbnN0IGRiID0gbW9uZ29vc2UuY29ubmVjdGlvbi5kYjtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pXHJcbiAgICAgIC5maW5kKHF1ZXJ5LCBwcm9qZWN0aW9uKVxyXG4gICAgICAubGltaXQob3B0aW9ucy5saW1pdClcclxuICAgICAgLnNraXAob3B0aW9ucy5za2lwKVxyXG4gICAgICAudG9BcnJheSgpO1xyXG4gICAgXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGNvdW50OiByZXN1bHRzLmxlbmd0aCxcclxuICAgICAgZGF0YTogcmVzdWx0c1xyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHF1ZXJ5aW5nIGNvbGxlY3Rpb24gJHtyZXEucGFyYW1zLmNvbGxlY3Rpb259OmAsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBBUEkgZW5kcG9pbnQgxJHhu4MgbOG6pXkgZG9jdW1lbnQgdGhlbyBJRFxyXG5yb3V0ZXIuZ2V0KCcvZG9jdW1lbnQvOmNvbGxlY3Rpb24vOmlkJywgY2hlY2tNb25nb0Nvbm5lY3Rpb24sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24sIGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSBPYmplY3RJZFxyXG4gICAgaWYgKCFtb25nb29zZS5UeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGlkKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIE9iamVjdElkIGZvcm1hdCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFRo4buxYyBoaeG7h24gdHJ1eSB24bqlblxyXG4gICAgY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0aW9uLmRiO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5maW5kT25lKHtcclxuICAgICAgX2lkOiBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoaWQpXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnRG9jdW1lbnQgbm90IGZvdW5kJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiByZXN1bHRcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBnZXR0aW5nIGRvY3VtZW50IGZyb20gJHtyZXEucGFyYW1zLmNvbGxlY3Rpb259OmAsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBBUEkgZW5kcG9pbnQgxJHhu4MgdOG6oW8gZG9jdW1lbnQgbeG7m2lcclxucm91dGVyLnBvc3QoJy9kb2N1bWVudC86Y29sbGVjdGlvbicsIGNoZWNrTW9uZ29Db25uZWN0aW9uLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBjb2xsZWN0aW9uIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgZG9jdW1lbnQgPSByZXEuYm9keTtcclxuICAgIFxyXG4gICAgLy8gVmFsaWRhdGUgZG9jdW1lbnRcclxuICAgIGlmICghZG9jdW1lbnQgfHwgT2JqZWN0LmtleXMoZG9jdW1lbnQpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdFbXB0eSBkb2N1bWVudCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFRo4buxYyBoaeG7h24gdGjDqm0gbeG7m2lcclxuICAgIGNvbnN0IGRiID0gbW9uZ29vc2UuY29ubmVjdGlvbi5kYjtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oY29sbGVjdGlvbikuaW5zZXJ0T25lKGRvY3VtZW50KTtcclxuICAgIFxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBpbnNlcnRlZElkOiByZXN1bHQuaW5zZXJ0ZWRJZCxcclxuICAgICAgZGF0YTogZG9jdW1lbnRcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBkb2N1bWVudCBpbiAke3JlcS5wYXJhbXMuY29sbGVjdGlvbn06YCwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEFQSSBlbmRwb2ludCDEkeG7gyBj4bqtcCBuaOG6rXQgZG9jdW1lbnRcclxucm91dGVyLnB1dCgnL2RvY3VtZW50Lzpjb2xsZWN0aW9uLzppZCcsIGNoZWNrTW9uZ29Db25uZWN0aW9uLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBjb2xsZWN0aW9uLCBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHVwZGF0ZXMgPSByZXEuYm9keTtcclxuICAgIFxyXG4gICAgLy8gVmFsaWRhdGUgT2JqZWN0SWRcclxuICAgIGlmICghbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQuaXNWYWxpZChpZCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBPYmplY3RJZCBmb3JtYXQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSB1cGRhdGVzXHJcbiAgICBpZiAoIXVwZGF0ZXMgfHwgT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ05vIHVwZGF0ZXMgcHJvdmlkZWQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBUaOG7sWMgaGnhu4duIGPhuq1wIG5o4bqtdFxyXG4gICAgY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0aW9uLmRiO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS51cGRhdGVPbmUoXHJcbiAgICAgIHsgX2lkOiBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoaWQpIH0sXHJcbiAgICAgIHsgJHNldDogdXBkYXRlcyB9XHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0Lm1hdGNoZWRDb3VudCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdEb2N1bWVudCBub3QgZm91bmQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1vZGlmaWVkQ291bnQ6IHJlc3VsdC5tb2RpZmllZENvdW50LFxyXG4gICAgICBtYXRjaGVkQ291bnQ6IHJlc3VsdC5tYXRjaGVkQ291bnRcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciB1cGRhdGluZyBkb2N1bWVudCBpbiAke3JlcS5wYXJhbXMuY29sbGVjdGlvbn06YCwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEFQSSBlbmRwb2ludCDEkeG7gyB4w7NhIGRvY3VtZW50XHJcbnJvdXRlci5kZWxldGUoJy9kb2N1bWVudC86Y29sbGVjdGlvbi86aWQnLCBjaGVja01vbmdvQ29ubmVjdGlvbiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgY29sbGVjdGlvbiwgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYXRlIE9iamVjdElkXHJcbiAgICBpZiAoIW1vbmdvb3NlLlR5cGVzLk9iamVjdElkLmlzVmFsaWQoaWQpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgT2JqZWN0SWQgZm9ybWF0J1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVGjhu7FjIGhp4buHbiB4w7NhXHJcbiAgICBjb25zdCBkYiA9IG1vbmdvb3NlLmNvbm5lY3Rpb24uZGI7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pLmRlbGV0ZU9uZSh7XHJcbiAgICAgIF9pZDogbmV3IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkKGlkKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGlmIChyZXN1bHQuZGVsZXRlZENvdW50ID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0RvY3VtZW50IG5vdCBmb3VuZCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGVsZXRlZENvdW50OiByZXN1bHQuZGVsZXRlZENvdW50XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgZG9jdW1lbnQgZnJvbSAke3JlcS5wYXJhbXMuY29sbGVjdGlvbn06YCwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEFQSSBlbmRwb2ludCDEkeG7gyDEkeG6v20gc+G7kSBsxrDhu6NuZyBkb2N1bWVudHMgdHJvbmcgY29sbGVjdGlvblxyXG5yb3V0ZXIucG9zdCgnL2NvdW50Lzpjb2xsZWN0aW9uJywgY2hlY2tNb25nb0Nvbm5lY3Rpb24sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGNvbGxlY3Rpb24gfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IHF1ZXJ5ID0ge30gfSA9IHJlcS5ib2R5O1xyXG4gICAgXHJcbiAgICAvLyBUaOG7sWMgaGnhu4duIMSR4bq/bVxyXG4gICAgY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0aW9uLmRiO1xyXG4gICAgY29uc3QgY291bnQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pLmNvdW50RG9jdW1lbnRzKHF1ZXJ5KTtcclxuICAgIFxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBjb3VudFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNvdW50aW5nIGRvY3VtZW50cyBpbiAke3JlcS5wYXJhbXMuY29sbGVjdGlvbn06YCwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEFQSSBlbmRwb2ludCDEkeG7gyBs4bqleSBkYW5oIHPDoWNoIGNvbGxlY3Rpb25zXHJcbnJvdXRlci5nZXQoJy9jb2xsZWN0aW9ucycsIGNoZWNrTW9uZ29Db25uZWN0aW9uLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGIgPSBtb25nb29zZS5jb25uZWN0aW9uLmRiO1xyXG4gICAgY29uc3QgY29sbGVjdGlvbnMgPSBhd2FpdCBkYi5saXN0Q29sbGVjdGlvbnMoKS50b0FycmF5KCk7XHJcbiAgICBcclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25zLm1hcChjb2wgPT4gY29sLm5hbWUpXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbGlzdGluZyBjb2xsZWN0aW9uczonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyAiXSwibWFwcGluZ3MiOiI7QUFDQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFELE9BQUEsMEJBQWlELENBRmpEOzs7QUFLQSxNQUFNRSxNQUFN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