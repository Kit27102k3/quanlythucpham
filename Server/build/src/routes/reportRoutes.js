"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;
var _express = _interopRequireDefault(require("express"));
var _Order = _interopRequireDefault(require("../Model/Order.js"));
var _Products = _interopRequireDefault(require("../Model/Products.js"));
var _Register = _interopRequireDefault(require("../Model/Register.js"));
var _Category = _interopRequireDefault(require("../Model/Category.js"));
var _authMiddleware = require("../Middleware/authMiddleware.js");
var _ProductController = require("../Controller/ProductController.js"); /* eslint-disable no-unused-vars */ // Added missing import

const router = _express.default.Router();

// Get revenue data by time range (week/month/year)
router.get("/revenue", _authMiddleware.verifyToken, async (req, res) => {
  try {
    const { timeRange } = req.query;
    const currentDate = new Date();
    let startDate;

    // Set time range
    switch (timeRange) {
      case "week":
        startDate = new Date(currentDate.setDate(currentDate.getDate() - 7));
        break;
      case "month":
        startDate = new Date(currentDate.setDate(currentDate.getDate() - 30));
        break;
      case "year":
        startDate = new Date(
          currentDate.setFullYear(currentDate.getFullYear() - 1)
        );
        break;
      default:
        return res.status(400).json({ message: "Invalid timeRange parameter" });
    }

    // Aggregate revenue data
    let revenueData;
    if (timeRange === "week") {
      revenueData = await _Order.default.aggregate([
      {
        $match: {
          createdAt: { $gte: startDate },
          status: { $in: ["completed", "delivered"] }
        }
      },
      {
        $group: {
          _id: { $dayOfWeek: "$createdAt" },
          revenue: { $sum: "$totalAmount" }
        }
      },
      { $sort: { _id: 1 } },
      { $project: { _id: 0, day: "$_id", revenue: 1 } }]
      );

      // Format data for all days of the week
      const daysOfWeek = [
      "CN",
      "Thứ 2",
      "Thứ 3",
      "Thứ 4",
      "Thứ 5",
      "Thứ 6",
      "Thứ 7"];

      revenueData = Array.from({ length: 7 }, (_, i) => {
        const item = revenueData.find((item) => item.day === i + 1);
        return {
          name: daysOfWeek[i],
          revenue: item ? item.revenue : 0
        };
      });
    } else if (timeRange === "month") {
      revenueData = await _Order.default.aggregate([
      {
        $match: {
          createdAt: { $gte: startDate },
          status: { $in: ["completed", "delivered"] }
        }
      },
      {
        $group: {
          _id: { $dayOfMonth: "$createdAt" },
          revenue: { $sum: "$totalAmount" }
        }
      },
      { $sort: { _id: 1 } },
      { $project: { _id: 0, name: { $toString: "$_id" }, revenue: 1 } }]
      );

      // Ensure data for all days
      const daysInMonth = new Date(
        currentDate.getFullYear(),
        currentDate.getMonth() + 1,
        0
      ).getDate();
      revenueData = Array.from({ length: daysInMonth }, (_, i) => {
        const item = revenueData.find((item) => parseInt(item.name) === i + 1);
        return {
          name: `${i + 1}`,
          revenue: item ? item.revenue : 0
        };
      });
    } else {
      revenueData = await _Order.default.aggregate([
      {
        $match: {
          createdAt: { $gte: startDate },
          status: { $in: ["completed", "delivered"] }
        }
      },
      {
        $group: {
          _id: { $month: "$createdAt" },
          revenue: { $sum: "$totalAmount" }
        }
      },
      { $sort: { _id: 1 } },
      { $project: { _id: 0, month: "$_id", revenue: 1 } }]
      );

      // Format data for all months
      const months = Array.from({ length: 12 }, (_, i) => `Tháng ${i + 1}`);
      revenueData = Array.from({ length: 12 }, (_, i) => {
        const item = revenueData.find((item) => item.month === i + 1);
        return {
          name: months[i],
          revenue: item ? item.revenue : 0
        };
      });
    }

    res.json(revenueData);
  } catch (error) {
    console.error("Error fetching revenue data:", error);
    res.status(500).json({ message: "Error fetching revenue data" });
  }
});

// Get top-selling products
router.get("/top-products", _authMiddleware.verifyToken, async (req, res) => {
  try {
    const { limit = 10 } = req.query;

    const topProducts = await _Order.default.aggregate([
    { $match: { status: "completed" } },
    { $unwind: "$products" },
    {
      $lookup: {
        from: "products",
        localField: "products.productId",
        foreignField: "_id",
        as: "productInfo"
      }
    },
    {
      $group: {
        _id: "$products.productId",
        name: { $first: { $arrayElemAt: ["$productInfo.productName", 0] } },
        sold: { $sum: "$products.quantity" },
        revenue: {
          $sum: { $multiply: ["$products.price", "$products.quantity"] }
        }
      }
    },
    { $sort: { revenue: -1 } },
    { $limit: parseInt(limit) },
    { $project: { _id: 0, name: 1, sold: 1, revenue: 1 } }]
    );

    res.json(topProducts);
  } catch (error) {
    console.error("Error fetching top products:", error);
    res.status(500).json({ message: "Error fetching top products" });
  }
});

// Get low-stock products (delegated to ProductController)
router.get("/low-stock", _authMiddleware.verifyToken, _ProductController.getLowStockProducts);

// Get user statistics
router.get("/users", _authMiddleware.verifyToken, async (req, res) => {
  try {
    const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);

    const [totalUsers, newUsers, activeUsers, guestOrders] = await Promise.all([
    _Register.default.countDocuments(),
    _Register.default.countDocuments({ createdAt: { $gte: thirtyDaysAgo } }),
    _Order.default.distinct("userId", {
      createdAt: { $gte: thirtyDaysAgo },
      userId: { $exists: true, $ne: null }
    }).then((users) => users.length),
    _Order.default.countDocuments({
      createdAt: { $gte: thirtyDaysAgo },
      userId: { $exists: false }
    })]
    );

    const userData = [
    { name: "Người dùng mới", count: newUsers, color: "#8884d8" },
    { name: "Khách hàng thân thiết", count: activeUsers, color: "#82ca9d" },
    { name: "Khách vãng lai", count: guestOrders, color: "#ffc658" }];


    res.json(userData);
  } catch (error) {
    console.error("Error fetching user data:", error);
    res.status(500).json({ message: "Error fetching user data" });
  }
});

// Test data structure
router.get("/test-structure", _authMiddleware.verifyToken, async (req, res) => {
  try {
    const [orderCount, productCount, userCount, orderStatus, categories] =
    await Promise.all([
    _Order.default.countDocuments(),
    _Products.default.countDocuments(),
    _Register.default.countDocuments(),
    _Order.default.aggregate([{ $group: { _id: "$status", count: { $sum: 1 } } }]),
    _Category.default.find()]
    );

    res.json({
      message: "Data structure checked successfully",
      orderCount,
      productCount,
      userCount,
      orderStatus,
      categories
    });
  } catch (error) {
    console.error("Error checking data structure:", error);
    res.status(500).json({ message: "Error checking data structure" });
  }
});var _default = exports.default =

router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX09yZGVyIiwiX1Byb2R1Y3RzIiwiX1JlZ2lzdGVyIiwiX0NhdGVnb3J5IiwiX2F1dGhNaWRkbGV3YXJlIiwiX1Byb2R1Y3RDb250cm9sbGVyIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImF1dGhNaWRkbGV3YXJlIiwicmVxIiwicmVzIiwidGltZVJhbmdlIiwicXVlcnkiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJzdGFydERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInNldEZ1bGxZZWFyIiwiZ2V0RnVsbFllYXIiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInJldmVudWVEYXRhIiwiT3JkZXIiLCJhZ2dyZWdhdGUiLCIkbWF0Y2giLCJjcmVhdGVkQXQiLCIkZ3RlIiwiJGluIiwiJGdyb3VwIiwiX2lkIiwiJGRheU9mV2VlayIsInJldmVudWUiLCIkc3VtIiwiJHNvcnQiLCIkcHJvamVjdCIsImRheSIsImRheXNPZldlZWsiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJfIiwiaSIsIml0ZW0iLCJmaW5kIiwibmFtZSIsIiRkYXlPZk1vbnRoIiwiJHRvU3RyaW5nIiwiZGF5c0luTW9udGgiLCJnZXRNb250aCIsInBhcnNlSW50IiwiJG1vbnRoIiwibW9udGgiLCJtb250aHMiLCJlcnJvciIsImNvbnNvbGUiLCJsaW1pdCIsInRvcFByb2R1Y3RzIiwiJHVud2luZCIsIiRsb29rdXAiLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiYXMiLCIkZmlyc3QiLCIkYXJyYXlFbGVtQXQiLCJzb2xkIiwiJG11bHRpcGx5IiwiJGxpbWl0IiwiZ2V0TG93U3RvY2tQcm9kdWN0cyIsInRoaXJ0eURheXNBZ28iLCJub3ciLCJ0b3RhbFVzZXJzIiwibmV3VXNlcnMiLCJhY3RpdmVVc2VycyIsImd1ZXN0T3JkZXJzIiwiUHJvbWlzZSIsImFsbCIsIlVzZXIiLCJjb3VudERvY3VtZW50cyIsImRpc3RpbmN0IiwidXNlcklkIiwiJGV4aXN0cyIsIiRuZSIsInRoZW4iLCJ1c2VycyIsInVzZXJEYXRhIiwiY291bnQiLCJjb2xvciIsIm9yZGVyQ291bnQiLCJwcm9kdWN0Q291bnQiLCJ1c2VyQ291bnQiLCJvcmRlclN0YXR1cyIsImNhdGVnb3JpZXMiLCJQcm9kdWN0IiwiQ2F0ZWdvcnkiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3JvdXRlcy9yZXBvcnRSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IE9yZGVyIGZyb20gXCIuLi9Nb2RlbC9PcmRlci5qc1wiO1xyXG5pbXBvcnQgUHJvZHVjdCBmcm9tIFwiLi4vTW9kZWwvUHJvZHVjdHMuanNcIjtcclxuaW1wb3J0IFVzZXIgZnJvbSBcIi4uL01vZGVsL1JlZ2lzdGVyLmpzXCI7XHJcbmltcG9ydCBDYXRlZ29yeSBmcm9tIFwiLi4vTW9kZWwvQ2F0ZWdvcnkuanNcIjsgLy8gQWRkZWQgbWlzc2luZyBpbXBvcnRcclxuaW1wb3J0IHsgdmVyaWZ5VG9rZW4gYXMgYXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vTWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZS5qc1wiO1xyXG5pbXBvcnQgeyBnZXRMb3dTdG9ja1Byb2R1Y3RzIH0gZnJvbSBcIi4uL0NvbnRyb2xsZXIvUHJvZHVjdENvbnRyb2xsZXIuanNcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG4vLyBHZXQgcmV2ZW51ZSBkYXRhIGJ5IHRpbWUgcmFuZ2UgKHdlZWsvbW9udGgveWVhcilcclxucm91dGVyLmdldChcIi9yZXZlbnVlXCIsIGF1dGhNaWRkbGV3YXJlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0aW1lUmFuZ2UgfSA9IHJlcS5xdWVyeTtcclxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGxldCBzdGFydERhdGU7XHJcblxyXG4gICAgLy8gU2V0IHRpbWUgcmFuZ2VcclxuICAgIHN3aXRjaCAodGltZVJhbmdlKSB7XHJcbiAgICAgIGNhc2UgXCJ3ZWVrXCI6XHJcbiAgICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUoY3VycmVudERhdGUuc2V0RGF0ZShjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSA3KSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJtb250aFwiOlxyXG4gICAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnNldERhdGUoY3VycmVudERhdGUuZ2V0RGF0ZSgpIC0gMzApKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInllYXJcIjpcclxuICAgICAgICBzdGFydERhdGUgPSBuZXcgRGF0ZShcclxuICAgICAgICAgIGN1cnJlbnREYXRlLnNldEZ1bGxZZWFyKGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgLSAxKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJbnZhbGlkIHRpbWVSYW5nZSBwYXJhbWV0ZXJcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZ2dyZWdhdGUgcmV2ZW51ZSBkYXRhXHJcbiAgICBsZXQgcmV2ZW51ZURhdGE7XHJcbiAgICBpZiAodGltZVJhbmdlID09PSBcIndlZWtcIikge1xyXG4gICAgICByZXZlbnVlRGF0YSA9IGF3YWl0IE9yZGVyLmFnZ3JlZ2F0ZShbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJG1hdGNoOiB7XHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogeyAkZ3RlOiBzdGFydERhdGUgfSxcclxuICAgICAgICAgICAgc3RhdHVzOiB7ICRpbjogW1wiY29tcGxldGVkXCIsIFwiZGVsaXZlcmVkXCJdIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgICAgIF9pZDogeyAkZGF5T2ZXZWVrOiBcIiRjcmVhdGVkQXRcIiB9LFxyXG4gICAgICAgICAgICByZXZlbnVlOiB7ICRzdW06IFwiJHRvdGFsQW1vdW50XCIgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7ICRzb3J0OiB7IF9pZDogMSB9IH0sXHJcbiAgICAgICAgeyAkcHJvamVjdDogeyBfaWQ6IDAsIGRheTogXCIkX2lkXCIsIHJldmVudWU6IDEgfSB9LFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIC8vIEZvcm1hdCBkYXRhIGZvciBhbGwgZGF5cyBvZiB0aGUgd2Vla1xyXG4gICAgICBjb25zdCBkYXlzT2ZXZWVrID0gW1xyXG4gICAgICAgIFwiQ05cIixcclxuICAgICAgICBcIlRo4bupIDJcIixcclxuICAgICAgICBcIlRo4bupIDNcIixcclxuICAgICAgICBcIlRo4bupIDRcIixcclxuICAgICAgICBcIlRo4bupIDVcIixcclxuICAgICAgICBcIlRo4bupIDZcIixcclxuICAgICAgICBcIlRo4bupIDdcIixcclxuICAgICAgXTtcclxuICAgICAgcmV2ZW51ZURhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA3IH0sIChfLCBpKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHJldmVudWVEYXRhLmZpbmQoKGl0ZW0pID0+IGl0ZW0uZGF5ID09PSBpICsgMSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5hbWU6IGRheXNPZldlZWtbaV0sXHJcbiAgICAgICAgICByZXZlbnVlOiBpdGVtID8gaXRlbS5yZXZlbnVlIDogMCxcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAodGltZVJhbmdlID09PSBcIm1vbnRoXCIpIHtcclxuICAgICAgcmV2ZW51ZURhdGEgPSBhd2FpdCBPcmRlci5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICRtYXRjaDoge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHsgJGd0ZTogc3RhcnREYXRlIH0sXHJcbiAgICAgICAgICAgIHN0YXR1czogeyAkaW46IFtcImNvbXBsZXRlZFwiLCBcImRlbGl2ZXJlZFwiXSB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICBfaWQ6IHsgJGRheU9mTW9udGg6IFwiJGNyZWF0ZWRBdFwiIH0sXHJcbiAgICAgICAgICAgIHJldmVudWU6IHsgJHN1bTogXCIkdG90YWxBbW91bnRcIiB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgJHNvcnQ6IHsgX2lkOiAxIH0gfSxcclxuICAgICAgICB7ICRwcm9qZWN0OiB7IF9pZDogMCwgbmFtZTogeyAkdG9TdHJpbmc6IFwiJF9pZFwiIH0sIHJldmVudWU6IDEgfSB9LFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIC8vIEVuc3VyZSBkYXRhIGZvciBhbGwgZGF5c1xyXG4gICAgICBjb25zdCBkYXlzSW5Nb250aCA9IG5ldyBEYXRlKFxyXG4gICAgICAgIGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgMFxyXG4gICAgICApLmdldERhdGUoKTtcclxuICAgICAgcmV2ZW51ZURhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBkYXlzSW5Nb250aCB9LCAoXywgaSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSByZXZlbnVlRGF0YS5maW5kKChpdGVtKSA9PiBwYXJzZUludChpdGVtLm5hbWUpID09PSBpICsgMSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5hbWU6IGAke2kgKyAxfWAsXHJcbiAgICAgICAgICByZXZlbnVlOiBpdGVtID8gaXRlbS5yZXZlbnVlIDogMCxcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldmVudWVEYXRhID0gYXdhaXQgT3JkZXIuYWdncmVnYXRlKFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkbWF0Y2g6IHtcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB7ICRndGU6IHN0YXJ0RGF0ZSB9LFxyXG4gICAgICAgICAgICBzdGF0dXM6IHsgJGluOiBbXCJjb21wbGV0ZWRcIiwgXCJkZWxpdmVyZWRcIl0gfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkZ3JvdXA6IHtcclxuICAgICAgICAgICAgX2lkOiB7ICRtb250aDogXCIkY3JlYXRlZEF0XCIgfSxcclxuICAgICAgICAgICAgcmV2ZW51ZTogeyAkc3VtOiBcIiR0b3RhbEFtb3VudFwiIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyAkc29ydDogeyBfaWQ6IDEgfSB9LFxyXG4gICAgICAgIHsgJHByb2plY3Q6IHsgX2lkOiAwLCBtb250aDogXCIkX2lkXCIsIHJldmVudWU6IDEgfSB9LFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIC8vIEZvcm1hdCBkYXRhIGZvciBhbGwgbW9udGhzXHJcbiAgICAgIGNvbnN0IG1vbnRocyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEyIH0sIChfLCBpKSA9PiBgVGjDoW5nICR7aSArIDF9YCk7XHJcbiAgICAgIHJldmVudWVEYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTIgfSwgKF8sIGkpID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtID0gcmV2ZW51ZURhdGEuZmluZCgoaXRlbSkgPT4gaXRlbS5tb250aCA9PT0gaSArIDEpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBuYW1lOiBtb250aHNbaV0sXHJcbiAgICAgICAgICByZXZlbnVlOiBpdGVtID8gaXRlbS5yZXZlbnVlIDogMCxcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuanNvbihyZXZlbnVlRGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByZXZlbnVlIGRhdGE6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJvciBmZXRjaGluZyByZXZlbnVlIGRhdGFcIiB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gR2V0IHRvcC1zZWxsaW5nIHByb2R1Y3RzXHJcbnJvdXRlci5nZXQoXCIvdG9wLXByb2R1Y3RzXCIsIGF1dGhNaWRkbGV3YXJlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBsaW1pdCA9IDEwIH0gPSByZXEucXVlcnk7XHJcblxyXG4gICAgY29uc3QgdG9wUHJvZHVjdHMgPSBhd2FpdCBPcmRlci5hZ2dyZWdhdGUoW1xyXG4gICAgICB7ICRtYXRjaDogeyBzdGF0dXM6IFwiY29tcGxldGVkXCIgfSB9LFxyXG4gICAgICB7ICR1bndpbmQ6IFwiJHByb2R1Y3RzXCIgfSxcclxuICAgICAge1xyXG4gICAgICAgICRsb29rdXA6IHtcclxuICAgICAgICAgIGZyb206IFwicHJvZHVjdHNcIixcclxuICAgICAgICAgIGxvY2FsRmllbGQ6IFwicHJvZHVjdHMucHJvZHVjdElkXCIsXHJcbiAgICAgICAgICBmb3JlaWduRmllbGQ6IFwiX2lkXCIsXHJcbiAgICAgICAgICBhczogXCJwcm9kdWN0SW5mb1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICAkZ3JvdXA6IHtcclxuICAgICAgICAgIF9pZDogXCIkcHJvZHVjdHMucHJvZHVjdElkXCIsXHJcbiAgICAgICAgICBuYW1lOiB7ICRmaXJzdDogeyAkYXJyYXlFbGVtQXQ6IFtcIiRwcm9kdWN0SW5mby5wcm9kdWN0TmFtZVwiLCAwXSB9IH0sXHJcbiAgICAgICAgICBzb2xkOiB7ICRzdW06IFwiJHByb2R1Y3RzLnF1YW50aXR5XCIgfSxcclxuICAgICAgICAgIHJldmVudWU6IHtcclxuICAgICAgICAgICAgJHN1bTogeyAkbXVsdGlwbHk6IFtcIiRwcm9kdWN0cy5wcmljZVwiLCBcIiRwcm9kdWN0cy5xdWFudGl0eVwiXSB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7ICRzb3J0OiB7IHJldmVudWU6IC0xIH0gfSxcclxuICAgICAgeyAkbGltaXQ6IHBhcnNlSW50KGxpbWl0KSB9LFxyXG4gICAgICB7ICRwcm9qZWN0OiB7IF9pZDogMCwgbmFtZTogMSwgc29sZDogMSwgcmV2ZW51ZTogMSB9IH0sXHJcbiAgICBdKTtcclxuXHJcbiAgICByZXMuanNvbih0b3BQcm9kdWN0cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB0b3AgcHJvZHVjdHM6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJvciBmZXRjaGluZyB0b3AgcHJvZHVjdHNcIiB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gR2V0IGxvdy1zdG9jayBwcm9kdWN0cyAoZGVsZWdhdGVkIHRvIFByb2R1Y3RDb250cm9sbGVyKVxyXG5yb3V0ZXIuZ2V0KFwiL2xvdy1zdG9ja1wiLCBhdXRoTWlkZGxld2FyZSwgZ2V0TG93U3RvY2tQcm9kdWN0cyk7XHJcblxyXG4vLyBHZXQgdXNlciBzdGF0aXN0aWNzXHJcbnJvdXRlci5nZXQoXCIvdXNlcnNcIiwgYXV0aE1pZGRsZXdhcmUsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB0aGlydHlEYXlzQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XHJcblxyXG4gICAgY29uc3QgW3RvdGFsVXNlcnMsIG5ld1VzZXJzLCBhY3RpdmVVc2VycywgZ3Vlc3RPcmRlcnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICBVc2VyLmNvdW50RG9jdW1lbnRzKCksXHJcbiAgICAgIFVzZXIuY291bnREb2N1bWVudHMoeyBjcmVhdGVkQXQ6IHsgJGd0ZTogdGhpcnR5RGF5c0FnbyB9IH0pLFxyXG4gICAgICBPcmRlci5kaXN0aW5jdChcInVzZXJJZFwiLCB7XHJcbiAgICAgICAgY3JlYXRlZEF0OiB7ICRndGU6IHRoaXJ0eURheXNBZ28gfSxcclxuICAgICAgICB1c2VySWQ6IHsgJGV4aXN0czogdHJ1ZSwgJG5lOiBudWxsIH0sXHJcbiAgICAgIH0pLnRoZW4oKHVzZXJzKSA9PiB1c2Vycy5sZW5ndGgpLFxyXG4gICAgICBPcmRlci5jb3VudERvY3VtZW50cyh7XHJcbiAgICAgICAgY3JlYXRlZEF0OiB7ICRndGU6IHRoaXJ0eURheXNBZ28gfSxcclxuICAgICAgICB1c2VySWQ6IHsgJGV4aXN0czogZmFsc2UgfSxcclxuICAgICAgfSksXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IFtcclxuICAgICAgeyBuYW1lOiBcIk5nxrDhu51pIGTDuW5nIG3hu5tpXCIsIGNvdW50OiBuZXdVc2VycywgY29sb3I6IFwiIzg4ODRkOFwiIH0sXHJcbiAgICAgIHsgbmFtZTogXCJLaMOhY2ggaMOgbmcgdGjDom4gdGhp4bq/dFwiLCBjb3VudDogYWN0aXZlVXNlcnMsIGNvbG9yOiBcIiM4MmNhOWRcIiB9LFxyXG4gICAgICB7IG5hbWU6IFwiS2jDoWNoIHbDo25nIGxhaVwiLCBjb3VudDogZ3Vlc3RPcmRlcnMsIGNvbG9yOiBcIiNmZmM2NThcIiB9LFxyXG4gICAgXTtcclxuXHJcbiAgICByZXMuanNvbih1c2VyRGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1c2VyIGRhdGE6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJvciBmZXRjaGluZyB1c2VyIGRhdGFcIiB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gVGVzdCBkYXRhIHN0cnVjdHVyZVxyXG5yb3V0ZXIuZ2V0KFwiL3Rlc3Qtc3RydWN0dXJlXCIsIGF1dGhNaWRkbGV3YXJlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW29yZGVyQ291bnQsIHByb2R1Y3RDb3VudCwgdXNlckNvdW50LCBvcmRlclN0YXR1cywgY2F0ZWdvcmllc10gPVxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgT3JkZXIuY291bnREb2N1bWVudHMoKSxcclxuICAgICAgICBQcm9kdWN0LmNvdW50RG9jdW1lbnRzKCksXHJcbiAgICAgICAgVXNlci5jb3VudERvY3VtZW50cygpLFxyXG4gICAgICAgIE9yZGVyLmFnZ3JlZ2F0ZShbeyAkZ3JvdXA6IHsgX2lkOiBcIiRzdGF0dXNcIiwgY291bnQ6IHsgJHN1bTogMSB9IH0gfV0pLFxyXG4gICAgICAgIENhdGVnb3J5LmZpbmQoKSxcclxuICAgICAgXSk7XHJcblxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIkRhdGEgc3RydWN0dXJlIGNoZWNrZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgICAgIG9yZGVyQ291bnQsXHJcbiAgICAgIHByb2R1Y3RDb3VudCxcclxuICAgICAgdXNlckNvdW50LFxyXG4gICAgICBvcmRlclN0YXR1cyxcclxuICAgICAgY2F0ZWdvcmllcyxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgZGF0YSBzdHJ1Y3R1cmU6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJvciBjaGVja2luZyBkYXRhIHN0cnVjdHVyZVwiIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IjtBQUNBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFNBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFNBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLGVBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLGtCQUFBLEdBQUFOLE9BQUEsdUNBQXlFLENBUHpFLG9DQUs2Qzs7QUFJN0MsTUFBTU8sTUFBTSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLENBQUMsQ0FBQzs7QUFFL0I7QUFDQUYsTUFBTSxDQUFDRyxHQUFHLENBQUMsVUFBVSxFQUFFQywyQkFBYyxFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3pELElBQUk7SUFDRixNQUFNLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEdBQUdGLEdBQUcsQ0FBQ0csS0FBSztJQUMvQixNQUFNQyxXQUFXLEdBQUcsSUFBSUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsSUFBSUMsU0FBUzs7SUFFYjtJQUNBLFFBQVFKLFNBQVM7TUFDZixLQUFLLE1BQU07UUFDVEksU0FBUyxHQUFHLElBQUlELElBQUksQ0FBQ0QsV0FBVyxDQUFDRyxPQUFPLENBQUNILFdBQVcsQ0FBQ0ksT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwRTtNQUNGLEtBQUssT0FBTztRQUNWRixTQUFTLEdBQUcsSUFB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