# Sơ Đồ Hệ Thống Quản Lý Thực Phẩm

## 1. Kiến Trúc Tổng Thể

```
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                      FRONT-END (React.js)                     │
│                                                               │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐      │
│  │               │  │               │  │               │      │
│  │  Admin Panel  │  │  User Portal  │  │  Mobile App   │      │
│  │               │  │               │  │               │      │
│  └───────┬───────┘  └───────┬───────┘  └───────┬───────┘      │
│          │                  │                  │              │
└──────────┼──────────────────┼──────────────────┼──────────────┘
           │                  │                  │               
           ▼                  ▼                  ▼               
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                  BACK-END (Node.js/Express)                   │
│                                                               │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐      │
│  │               │  │               │  │               │      │
│  │  API Routes   │  │  Controllers  │  │  Middleware   │      │
│  │               │  │               │  │               │      │
│  └───────┬───────┘  └───────┬───────┘  └───────┬───────┘      │
│          │                  │                  │              │
│          ▼                  ▼                  ▼              │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐      │
│  │               │  │               │  │               │      │
│  │    Models     │  │   Services    │  │    Utils      │      │
│  │               │  │               │  │               │      │
│  └───────┬───────┘  └───────┬───────┘  └───────────────┘      │
│          │                  │                                 │
└──────────┼──────────────────┼─────────────────────────────────┘
           │                  │                                  
           ▼                  ▼                                  
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                     DATABASE (MongoDB)                         │
│                                                               │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐      │
│  │               │  │               │  │               │      │
│  │   Products    │  │   Suppliers   │  │   Branches    │      │
│  │               │  │               │  │               │      │
│  └───────────────┘  └───────────────┘  └───────────────┘      │
│                                                               │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐      │
│  │               │  │               │  │               │      │
│  │    Orders     │  │    Users      │  │  Categories   │      │
│  │               │  │               │  │               │      │
│  └───────────────┘  └───────────────┘  └───────────────┘      │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

## 2. Luồng Dữ Liệu Quản Lý Sản Phẩm

```
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│   Supplier    │────►│   Product     │────►│    Branch     │
│   Creation    │     │   Creation    │     │   Inventory   │
│               │     │               │     │               │
└───────────────┘     └───────┬───────┘     └───────┬───────┘
                              │                     │
                              │                     │
                              ▼                     ▼
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│   Category    │────►│   Product     │◄────┤   Inventory   │
│  Assignment   │     │  Management   │     │   Updates     │
│               │     │               │     │               │
└───────────────┘     └───────┬───────┘     └───────────────┘
                              │
                              │
                              ▼
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│    Price      │◄────┤   Product     │────►│   Expiry      │
│   Updates     │     │   Lifecycle   │     │   Tracking    │
│               │     │               │     │               │
└───────────────┘     └───────────────┘     └───────────────┘
```

## 3. Luồng Xử Lý Đơn Hàng

```
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│  User Browses │────►│  Add to Cart  │────►│  Checkout     │
│   Products    │     │               │     │  Process      │
│               │     │               │     │               │
└───────────────┘     └───────────────┘     └───────┬───────┘
                                                    │
                                                    │
                                                    ▼
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│   Payment     │◄────┤  Apply Coupon │◄────┤  Shipping     │
│  Processing   │     │  (Optional)   │     │  Information  │
│               │     │               │     │               │
└───────┬───────┘     └───────────────┘     └───────────────┘
        │
        │
        ▼
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│  Order        │────►│  Inventory    │────►│  Shipping     │
│  Confirmation │     │  Update       │     │  Process      │
│               │     │               │     │               │
└───────┬───────┘     └───────────────┘     └───────┬───────┘
        │                                           │
        │                                           │
        ▼                                           ▼
┌───────────────┐                          ┌───────────────┐
│               │                          │               │
│  Order Status │                          │  Delivery     │
│  Updates      │                          │  Confirmation │
│               │                          │               │
└───────────────┘                          └───────────────┘
```

## 4. Mô Hình Quan Hệ Dữ Liệu Chi Tiết

```
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│   Supplier    │     │    Product    │     │    Branch     │
├───────────────┤     ├───────────────┤     ├───────────────┤
│ _id           │1   n│ _id           │n   1│ _id           │
│ name          │◄────┤ productName   │◄────┤ name          │
│ code          │     │ productPrice  │     │ address       │
│ contactPerson │     │ productImages │     │ phone         │
│ phone         │     │ productCategory     │ email         │
│ email         │     │ productBrand  │     │ manager       │
│ address       │     │ productBrandId│     │ openingHours  │
│ taxCode       │     │ productSupplier     │ isActive      │
│ notes         │     │ productSupplierId   │ latitude      │
│ status        │     │ branchId      │     │ longitude     │
│ branchId      │     │ productStatus │     │ createdBy     │
│ createdBy     │     │ productDiscount     └───────────────┘
│ updatedBy     │     │ productStock  │
└───────────────┘     │ expiryDate    │     ┌───────────────┐
                      │ soldCount     │     │   Category    │
┌───────────────┐     │ averageRating │     ├───────────────┤
│     User      │     └───────┬───────┘     │ _id           │
├───────────────┤             │       1    n│ name          │
│ _id           │             └─────────────┤ description   │
│ name          │                           │ isActive      │
│ email         │1                          └───────────────┘
│ password      │◄──┐
│ address       │   │          ┌───────────────┐
│ phone         │   │          │    Order      │
└───────────────┘   │          ├───────────────┤
                    │         n│ _id           │
                    └──────────┤ userId        │
                               │ products      │
                               │ totalAmount   │
                               │ coupon        │
                               │ status        │
                               │ shippingInfo  │
                               │ paymentMethod │
                               │ orderCode     │
                               │ notes         │
                               │ isPaid        │
                               │ completedAt   │
                               │ branchId      │
                               └───────────────┘
```

## 5. Quy Trình Quản Lý Hàng Tồn Kho

```
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                    QUẢN LÝ TỒN KHO                            │
│                                                               │
│  ┌───────────────┐      ┌───────────────┐      ┌───────────┐  │
│  │               │      │               │      │           │  │
│  │  Nhập hàng    │─────►│  Kiểm kê      │─────►│  Báo cáo  │  │
│  │  từ Supplier  │      │  định kỳ      │      │  tồn kho  │  │
│  │               │      │               │      │           │  │
│  └───────┬───────┘      └───────┬───────┘      └─────┬─────┘  │
│          │                      │                    │        │
│          ▼                      ▼                    ▼        │
│  ┌───────────────┐      ┌───────────────┐      ┌───────────┐  │
│  │               │      │               │      │           │  │
│  │  Cập nhật     │◄─────┤  Kiểm tra     │─────►│  Cảnh báo │  │
│  │  số lượng     │      │  hạn sử dụng  │      │  hết hàng │  │
│  │               │      │               │      │           │  │
│  └───────┬───────┘      └───────────────┘      └───────────┘  │
│          │                                                    │
│          ▼                                                    │
│  ┌───────────────┐      ┌───────────────┐                     │
│  │               │      │               │                     │
│  │  Phân phối    │─────►│  Xuất hàng    │                     │
│  │  theo Branch  │      │  theo Order   │                     │
│  │               │      │               │                     │
│  └───────────────┘      └───────────────┘                     │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

## 6. Quy Trình Phân Tích Dữ Liệu

```
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                    PHÂN TÍCH DỮ LIỆU                          │
│                                                               │
│  ┌───────────────┐      ┌───────────────┐      ┌───────────┐  │
│  │               │      │               │      │           │  │
│  │  Thu thập     │─────►│  Xử lý        │─────►│  Lưu trữ  │  │
│  │  dữ liệu      │      │  dữ liệu      │      │  dữ liệu  │  │
│  │               │      │               │      │           │  │
│  └───────────────┘      └───────────────┘      └─────┬─────┘  │
│                                                      │        │
│                                                      ▼        │
│  ┌───────────────┐      ┌───────────────┐      ┌───────────┐  │
│  │               │      │               │      │           │  │
│  │  Báo cáo      │◄─────┤  Phân tích    │◄─────┤  Truy vấn │  │
│  │  trực quan    │      │  xu hướng     │      │  dữ liệu  │  │
│  │               │      │               │      │           │  │
│  └───────┬───────┘      └───────────────┘      └───────────┘  │
│          │                                                    │
│          ▼                                                    │
│  ┌───────────────┐      ┌───────────────┐                     │
│  │               │      │               │                     │
│  │  Đề xuất      │─────►│  Ra quyết     │                     │
│  │  tối ưu       │      │  định         │                     │
│  │               │      │               │                     │
│  └───────────────┘      └───────────────┘                     │
│                                                               │
└───────────────────────────────────────────────────────────────┘
``` 